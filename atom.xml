<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://127.0.0.1</id>
    <title></title>
    <subtitle>æ¬¢è¿æ¥åˆ°æ™ºæ…§ç¬”è®°~è¿™é‡Œä¸»è¦ä¼šè®°å½•ç¼–ç¨‹å­¦ä¹ ç¬”è®°ğŸŒ¸</subtitle>
    <icon>http://127.0.0.1/images/favicon.ico</icon>
    <link href="http://127.0.0.1" />
    <author>
      <name>anoxia</name>
    </author>
    <updated>2023-08-06T16:00:00.000Z</updated>
    <category term="èµ·æº" />
    <entry>
        <id>http://127.0.0.1/project/bug%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3/</id>
        <title>é¡¹ç›®å¸¸è§é—®é¢˜</title>
        <link rel="alternate" href="http://127.0.0.1/project/bug%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3/"/>
        <content type="html">&lt;h3 id=&#34;mavené—®é¢˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#mavené—®é¢˜&#34;&gt;#&lt;/a&gt; Maven é—®é¢˜&lt;/h3&gt;
&lt;h4 id=&#34;mavenå³ä¾§å‡ºç°rootå­—æ ·&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#mavenå³ä¾§å‡ºç°rootå­—æ ·&#34;&gt;#&lt;/a&gt; maven å³ä¾§å‡ºç° root å­—æ ·&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é—®é¢˜åŸå› ï¼šç”±äºçˆ¶å·¥ç¨‹æœªå¯¼å…¥è¯¥å­æ¨¡å—ï¼Œæ‰€ä»¥ maven è®¤ä¸ºè¯¥æ¨¡å—ä¸ºæ ¹æ¨¡å—.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£å†³æ–¹æ³•:&lt;/p&gt;
&lt;figure class=&#34;highlight xml&#34;&gt;&lt;figcaption data-lang=&#34;XML&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;&lt;/span&gt;modules&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;&lt;/span&gt;module&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;/&lt;/span&gt;module&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;&amp;lt;!-- æ­¤å¤„æ”¾ç½®è¯¥å­æ¨¡å— --&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;/&lt;/span&gt;modules&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;javaé—®é¢˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#javaé—®é¢˜&#34;&gt;#&lt;/a&gt; JAVA é—®é¢˜&lt;/h3&gt;
&lt;h4 id=&#34;ä½¿ç”¨æ’é™¤æ³¨è§£æ‰€é‡é—®é¢˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä½¿ç”¨æ’é™¤æ³¨è§£æ‰€é‡é—®é¢˜&#34;&gt;#&lt;/a&gt; ä½¿ç”¨æ’é™¤æ³¨è§£æ‰€é‡é—®é¢˜&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é—®é¢˜ä»£ç :&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption data-lang=&#34;java&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token class-name&#34;&gt;&lt;span class=&#34;token namespace&#34;&gt;java&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;lang&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/span&gt;IllegalStateException&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;The&lt;/span&gt; following classes could not be excluded because they are not auto&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;configuration classes&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption data-lang=&#34;java&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;xxxxxxxxxx6 &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;private &lt;span class=&#34;token class-name&#34;&gt;LocalDateTime&lt;/span&gt; createTime&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;â€‹&lt;span class=&#34;token number&#34;&gt;3&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;setCreateTime&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Date&lt;/span&gt; createTime&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token number&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;LocalDateTime&lt;/span&gt; localDateTime &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; createTime&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;toInstant&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;atZone&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;ZoneId&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;systemDefault&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;toLocalDateTime&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;createTime &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; localDateTime&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;6&lt;/span&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;java&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£å†³åŠæ³•:&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption data-lang=&#34;java&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token annotation punctuation&#34;&gt;@SpringBootApplication&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;exclude &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;DataSourceAutoConfiguration&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;æŸ¥çœ‹ä¸€ä¸‹ç±»æ˜¯å¦å†™é”™äº†ï¼Œä¿®æ”¹å³å¯.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;mapperscanæ— æ³•æ³¨å…¥&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#mapperscanæ— æ³•æ³¨å…¥&#34;&gt;#&lt;/a&gt; mapperscan æ— æ³•æ³¨å…¥&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é—®é¢˜æè¿°ï¼šåœ¨ä»£ç ç•Œé¢ï¼Œçº¢è‰²è­¦å‘Šï¼ˆå¯åŠ¨ç¨‹åºå¹¶æ— å¼‚å¸¸ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é—®é¢˜åŸå› ï¼šmapper ç±»æ˜¯ä½¿ç”¨çš„ mybatis ç”Ÿæˆçš„ï¼Œspring æ— æ³•æ£€æµ‹å‡ºï¼Œä½†è¿è¡Œæ²¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£å†³åŠæ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¦æ­¢çº¢è‰²è­¦å‘Šï¼ˆä¸å»ºè®®ï¼Œå› ä¸ºåˆ«çš„åœ°æ–¹å¦‚æœè‡ªåŠ¨è£…é…å‡ºé—®é¢˜æ— æ³•åŠæ—¶å‘ç°ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ mapper ç±»åŠ å…¥ @Mapper æ³¨è§£ï¼ˆmybatis è‡ªå¸¦æ³¨è§£ï¼Œæ²¡å¯¼å…¥ mybatis çš„è¯ï¼Œè¦åœ¨å¯åŠ¨ç±»åŠ å…¥ @mapperscanï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ mapper ç±»åŠ å…¥ @Repository æ³¨è§£è·Ÿ mapperscan ç»“åˆï¼ˆspring è‡ªå¸¦æ³¨è§£ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;nacoså¼‚å¸¸&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#nacoså¼‚å¸¸&#34;&gt;#&lt;/a&gt; nacos å¼‚å¸¸&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é—®é¢˜ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption data-lang=&#34;java&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token class-name&#34;&gt;Failed&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;token namespace&#34;&gt;start&lt;/span&gt; bean &#39;nacosWatch&#39;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; nested exception is &lt;span class=&#34;token class-name&#34;&gt;&lt;span class=&#34;token namespace&#34;&gt;java&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;lang&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/span&gt;RuntimeException&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;ErrCode&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;400&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é—®é¢˜åŸå› ï¼špom æ–‡ä»¶å¯¼å…¥çš„ nacos ç‰ˆæœ¬å’Œ springboot ç‰ˆæœ¬ä¸å…¼å®¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£å†³åŠæ³•ï¼š&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNzM1Mzky&#34;&gt;ç‚¹å‡»æŸ¥çœ‹å¯¹åº”ç‰ˆæœ¬&lt;/span&gt;ï¼Œé‡æ–°å¯¼å…¥å³å¯å¯¹åº”ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="é¡¹ç›®æ€»ç»“" scheme="http://127.0.0.1/categories/project/" />
        <category term="Mysql" scheme="http://127.0.0.1/tags/Mysql/" />
        <category term="bug" scheme="http://127.0.0.1/tags/bug/" />
        <updated>2023-08-06T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://127.0.0.1/project/Mysql%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/</id>
        <title>è¿æ¥æ•°æ®åº“é‡åˆ°é—®é¢˜</title>
        <link rel="alternate" href="http://127.0.0.1/project/Mysql%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/"/>
        <content type="html">&lt;h3 id=&#34;1-æ—¶åŒºè½¬æ¢é—®é¢˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#1-æ—¶åŒºè½¬æ¢é—®é¢˜&#34;&gt;#&lt;/a&gt; 1. æ—¶åŒºè½¬æ¢é—®é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç›¸ä¿¡å¤§å¤šæ•°äººéƒ½é‡è§è¿‡æ•°æ®åº“æ—¶é—´æå–åˆ° Java å¯¹è±¡ä¹‹åï¼Œå‘ç”Ÿæ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿æ¥æ•°æ®åº“çš„æ—¶å€™è‹¥ä¸è®¾ç½®ï¼Œå°±ä¼šå¼•å‘æ—¶åŒºè½¬æ¢çš„é—®é¢˜ï¼Œå…¶åŸå› æ˜¯å› ä¸º:&lt;br /&gt;
&lt;mark&gt; å’±ä»¬æ‰€åœ¨æ—¶åŒºä¸ºä¸œå…«åŒºï¼Œè€Œé»˜è®¤æ—¶åŒºä¸º 0 åŒºï¼Œå·®è·å…«ä¸ªå°æ—¶ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨ä¸æ•°æ®åº“äº¤äº’æ—¶å°±ä¼šå‘ç”Ÿå…«å°æ—¶çš„è¯¯å·®ï¼Œ&lt;/mark&gt;&lt;br /&gt;
 è‹¥è¦è§£å†³æ­¤é—®é¢˜ï¼Œå°±è¦åœ¨è¿æ¥æ•°æ®åº“æ—¶è®¾ç½®é…ç½®:&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;jdbc&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;mysql&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;//localhost&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;3306/friend&lt;span class=&#34;token punctuation&#34;&gt;?&lt;/span&gt;useSSL=false&lt;span class=&#34;token important&#34;&gt;&amp;amp;serverTimezone=Asia/Shanghai&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&amp;amp; åé¢ä¾¿æ˜¯è®¾ç½®çš„æ—¶åŒºï¼Œè®¾ç½®ä¹‹ååœ¨ä¸ mysql äº¤äº’çš„æ—¶å€™å°±ä¸ä¼šå‘ç”Ÿæ—¶åŒºçš„é—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2æ•°æ®åº“å­—æ®µåˆ›å»ºæ—¶é—´å’Œä¿®æ”¹æ—¶é—´&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#2æ•°æ®åº“å­—æ®µåˆ›å»ºæ—¶é—´å’Œä¿®æ”¹æ—¶é—´&#34;&gt;#&lt;/a&gt; 2. æ•°æ®åº“å­—æ®µåˆ›å»ºæ—¶é—´å’Œä¿®æ”¹æ—¶é—´&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾ˆå¤šçš„æ•°æ®åº“è¡¨éƒ½éœ€è¦æœ‰åˆ›å»ºæ—¶é—´å’Œä¿®æ”¹æ—¶é—´ï¼Œæ­¤æ—¶å°±ä¼šå¼•å‘è®¸å¤šé—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæ˜¯åœ¨ Java ç±»ä¸­è‡ªå·±è®¾ç½®æ—¶é—´è¿‡äºéº»çƒ¦ï¼Œæ­¤æ—¶ä¾¿å¯ä»¥åœ¨æ•°æ®åº“å»ºè¡¨çš„æ—¶å€™è®¾ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt; create_time   timestamp default CURRENT_TIMESTAMP not null comment &#39;åˆ›å»ºæ—¶é—´&#39;,
 update_time   timestamp default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment &#39;ä¿®æ”¹æ—¶é—´&#39;,
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ›å»ºè¡¨çš„æ—¶å€™è¿›è¡Œä»¥ä¸Šçš„è®¾ç½®ä¾¿èƒ½åœ¨æ’å…¥å­—æ®µå’Œä¿®æ”¹å­—æ®µçš„æ—¶å€™ï¼Œæ•°æ®åº“è‡ªåŠ¨ä¿®æ”¹æ—¶é—´&lt;/p&gt;
&lt;h3 id=&#34;3æ•°æ®åº“æ—¶é—´è½¬æ¢é—®é¢˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#3æ•°æ®åº“æ—¶é—´è½¬æ¢é—®é¢˜&#34;&gt;#&lt;/a&gt; 3. æ•°æ®åº“æ—¶é—´è½¬æ¢é—®é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®åº“çš„ timestamp æ—¶é—´ä¸ºæ—¶é—´æˆ³ï¼Œå¦‚æœè½¬æ¢åˆ° Java é‡Œé¢å°±ä¼šé‡è§ä¸€äº›é—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è‹¥æ˜¯ Java å­—æ®µç›´æ¥ç”¨ date æ•°æ®æ¥æ”¶çš„è¯ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å’Œå‰ç«¯äº¤äº’çš„æ—¶å€™å°±ä¼šæœ‰æ ¼å¼é—®é¢˜ï¼Œdate çš„æ ¼å¼ç›´æ¥å‘é€ç»™å‰ç«¯çš„è¯ï¼Œç”¨æˆ·çœ‹çš„è¯ä¸æ˜¯ç‰¹åˆ«æ–¹ä¾¿ï¼Œå¦‚æœæ¯æ¬¡å‘é€ç»™å‰ç«¯éƒ½è¦è½¬æ¢å°±æ˜¾å¾—æœ‰äº›éº»çƒ¦&lt;br /&gt;
æ­¤æ—¶å¯ä»¥åœ¨ pojo ç±»ä¸­è®¾ç½®ä¸º localdatetime ç±»å‹ï¼Œä¿®æ”¹ä¸€ä¸‹ set ä»£ç ï¼Œä¾¿å¯æˆåŠŸæ¥æ”¶.&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption data-lang=&#34;java&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;LocalDateTime&lt;/span&gt; createTime&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;setCreateTime&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Date&lt;/span&gt; createTime&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token class-name&#34;&gt;LocalDateTime&lt;/span&gt; localDateTime &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; createTime&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;toInstant&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;atZone&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;ZoneId&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;systemDefault&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;toLocalDateTime&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;createTime &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; localDateTime&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
        <category term="é¡¹ç›®æ€»ç»“" scheme="http://127.0.0.1/categories/project/" />
        <category term="Mysql" scheme="http://127.0.0.1/tags/Mysql/" />
        <category term="bug" scheme="http://127.0.0.1/tags/bug/" />
        <updated>2023-08-06T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://127.0.0.1/interview/MySQL%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/</id>
        <title>Mysqlç›¸å…³é¢è¯•é¢˜</title>
        <link rel="alternate" href="http://127.0.0.1/interview/MySQL%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/"/>
        <content type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šMySQL ä¸­ï¼Œå¦‚ä½•å®šä½æ…¢æŸ¥è¯¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å—¯ï½ï¼Œæˆ‘ä»¬å½“æ—¶åšå‹æµ‹çš„æ—¶å€™æœ‰çš„æ¥å£éå¸¸çš„æ…¢ï¼Œæ¥å£çš„å“åº”æ—¶é—´è¶…è¿‡äº† 2 ç§’ä»¥ä¸Šï¼Œå› ä¸ºæˆ‘ä»¬å½“æ—¶çš„ç³»ç»Ÿéƒ¨ç½²äº†è¿ç»´çš„ç›‘æ§ç³»ç»Ÿ Skywalking ï¼Œåœ¨å±•ç¤ºçš„æŠ¥è¡¨ä¸­å¯ä»¥çœ‹åˆ°æ˜¯å“ªä¸€ä¸ªæ¥å£æ¯”è¾ƒæ…¢ï¼Œå¹¶ä¸”å¯ä»¥åˆ†æè¿™ä¸ªæ¥å£å“ªéƒ¨åˆ†æ¯”è¾ƒæ…¢ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ° SQL çš„å…·ä½“çš„æ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥å¯ä»¥å®šä½æ˜¯å“ªä¸ª sql å‡ºäº†é—®é¢˜&lt;/p&gt;
&lt;p&gt;å¦‚æœï¼Œé¡¹ç›®ä¸­æ²¡æœ‰è¿™ç§è¿ç»´çš„ç›‘æ§ç³»ç»Ÿï¼Œå…¶å®åœ¨ MySQL ä¸­ä¹Ÿæä¾›äº†æ…¢æ—¥å¿—æŸ¥è¯¢çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ MySQL çš„ç³»ç»Ÿé…ç½®æ–‡ä»¶ä¸­å¼€å¯è¿™ä¸ªæ…¢æ—¥å¿—çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥è®¾ç½® SQL æ‰§è¡Œè¶…è¿‡å¤šå°‘æ—¶é—´æ¥è®°å½•åˆ°ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæˆ‘è®°å¾—ä¸Šä¸€ä¸ªé¡¹ç›®é…ç½®çš„æ˜¯ 2 ç§’ï¼Œåªè¦ SQL æ‰§è¡Œçš„æ—¶é—´è¶…è¿‡äº† 2 ç§’å°±ä¼šè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ—¥å¿—æ–‡ä»¶æ‰¾åˆ°æ‰§è¡Œæ¯”è¾ƒæ…¢çš„ SQL äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šé‚£è¿™ä¸ª SQL è¯­å¥æ‰§è¡Œå¾ˆæ…¢ï¼Œå¦‚ä½•åˆ†æå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå¦‚æœä¸€æ¡ sql æ‰§è¡Œå¾ˆæ…¢çš„è¯ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ mysql è‡ªåŠ¨çš„æ‰§è¡Œè®¡åˆ’ explain æ¥å»æŸ¥çœ‹è¿™æ¡ sql çš„æ‰§è¡Œæƒ…å†µï¼Œæ¯”å¦‚åœ¨è¿™é‡Œé¢å¯ä»¥é€šè¿‡ key å’Œ key_len æ£€æŸ¥æ˜¯å¦å‘½ä¸­äº†ç´¢å¼•ï¼Œå¦‚æœæœ¬èº«å·²ç»æ·»åŠ äº†ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­ç´¢å¼•æ˜¯å¦æœ‰å¤±æ•ˆçš„æƒ…å†µï¼Œç¬¬äºŒä¸ªï¼Œå¯ä»¥é€šè¿‡ type å­—æ®µæŸ¥çœ‹ sql æ˜¯å¦æœ‰è¿›ä¸€æ­¥çš„ä¼˜åŒ–ç©ºé—´ï¼Œæ˜¯å¦å­˜åœ¨å…¨ç´¢å¼•æ‰«ææˆ–å…¨ç›˜æ‰«æï¼Œç¬¬ä¸‰ä¸ªå¯ä»¥é€šè¿‡ extra å»ºè®®æ¥åˆ¤æ–­ï¼Œæ˜¯å¦å‡ºç°äº†å›è¡¨çš„æƒ…å†µï¼Œå¦‚æœå‡ºç°äº†ï¼Œå¯ä»¥å°è¯•æ·»åŠ ç´¢å¼•æˆ–ä¿®æ”¹è¿”å›å­—æ®µæ¥ä¿®å¤&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šäº†è§£è¿‡ç´¢å¼•å—ï¼Ÿï¼ˆä»€ä¹ˆæ˜¯ç´¢å¼•ï¼‰&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œç´¢å¼•åœ¨é¡¹ç›®ä¸­è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå®ƒæ˜¯å¸®åŠ© MySQL é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯ç”¨æ¥æé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„ IO æˆæœ¬ï¼ŒåŒæ—¶é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œä¹Ÿèƒ½é™ä½äº† CPU çš„æ¶ˆè€—&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** ç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„äº†è§£è¿‡å˜›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š**MySQL çš„é»˜è®¤çš„å­˜å‚¨å¼•æ“ InnoDB é‡‡ç”¨çš„ B + æ ‘çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨ç´¢å¼•ï¼Œé€‰æ‹© B + æ ‘çš„ä¸»è¦çš„åŸå› æ˜¯ï¼šç¬¬ä¸€é˜¶æ•°æ›´å¤šï¼Œè·¯å¾„æ›´çŸ­ï¼Œç¬¬äºŒä¸ªç£ç›˜è¯»å†™ä»£ä»· B + æ ‘æ›´ä½ï¼Œéå¶å­èŠ‚ç‚¹åªå­˜å‚¨æŒ‡é’ˆï¼Œå¶å­é˜¶æ®µå­˜å‚¨æ•°æ®ï¼Œç¬¬ä¸‰æ˜¯ B + æ ‘ä¾¿äºæ‰«åº“å’ŒåŒºé—´æŸ¥è¯¢ï¼Œå¶å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š**B æ ‘å’Œ B + æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šç¬¬ä¸€ï¼šåœ¨ B æ ‘ä¸­ï¼Œéå¶å­èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹éƒ½ä¼šå­˜æ”¾æ•°æ®ï¼Œè€Œ B + æ ‘çš„æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨å¶å­èŠ‚ç‚¹ï¼Œåœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼ŒB + æ ‘æŸ¥æ‰¾æ•ˆç‡æ›´åŠ ç¨³å®š&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒï¼šåœ¨è¿›è¡ŒèŒƒå›´æŸ¥è¯¢çš„æ—¶å€™ï¼ŒB + æ ‘æ•ˆç‡æ›´é«˜ï¼Œå› ä¸º B + æ ‘éƒ½åœ¨å¶å­èŠ‚ç‚¹å­˜å‚¨ï¼Œå¹¶ä¸”å¶å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ä»€ä¹ˆæ˜¯éèšç°‡ç´¢å¼•ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äººï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¥½çš„ï½ï¼Œèšç°‡ç´¢å¼•ä¸»è¦æ˜¯æŒ‡æ•°æ®ä¸ç´¢å¼•æ”¾åˆ°ä¸€å—ï¼ŒB + æ ‘çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†æ•´è¡Œæ•°æ®ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸»é”®åœ¨ä½œä¸ºèšç°‡ç´¢å¼•çš„&lt;/p&gt;
&lt;p&gt;éèšç°‡ç´¢å¼•å€¼çš„æ˜¯æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼ŒB + æ ‘çš„å¶å­èŠ‚ç‚¹ä¿å­˜å¯¹åº”çš„ä¸»é”®ï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼Œä¸€èˆ¬æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç´¢å¼•éƒ½æ˜¯éèšç°‡ç´¢å¼•&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** çŸ¥é“ä»€ä¹ˆæ˜¯å›è¡¨æŸ¥è¯¢å˜›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œå…¶å®è·Ÿåˆšæ‰ä»‹ç»çš„èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•æ˜¯æœ‰å…³ç³»çš„ï¼Œå›è¡¨çš„æ„æ€å°±æ˜¯é€šè¿‡äºŒçº§ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„ä¸»é”®å€¼ï¼Œç„¶åå†é€šè¿‡ä¸»é”®å€¼æ‰¾åˆ°èšé›†ç´¢å¼•ä¸­æ‰€å¯¹åº”çš„æ•´è¡Œæ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å›è¡¨&lt;/p&gt;
&lt;p&gt;ã€&lt;strong&gt;å¤‡æ³¨&lt;/strong&gt;ï¼šå¦‚æœé¢è¯•å®˜ç›´æ¥é—®å›è¡¨ï¼Œåˆ™éœ€è¦å…ˆä»‹ç»èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€‘&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** çŸ¥é“ä»€ä¹ˆå«è¦†ç›–ç´¢å¼•å˜›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï½ï¼Œæ¸…æ¥šçš„&lt;/p&gt;
&lt;p&gt;è¦†ç›–ç´¢å¼•æ˜¯æŒ‡ select æŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†ç´¢å¼•ï¼Œåœ¨è¿”å›çš„åˆ—ï¼Œå¿…é¡»åœ¨ç´¢å¼•ä¸­å…¨éƒ¨èƒ½å¤Ÿæ‰¾åˆ°ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ id æŸ¥è¯¢ï¼Œå®ƒä¼šç›´æ¥èµ°èšé›†ç´¢å¼•æŸ¥è¯¢ï¼Œä¸€æ¬¡ç´¢å¼•æ‰«æï¼Œç›´æ¥è¿”å›æ•°æ®ï¼Œæ€§èƒ½é«˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæŒ‰ç…§äºŒçº§ç´¢å¼•æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œè¿”å›çš„åˆ—ä¸­æ²¡æœ‰åˆ›å»ºç´¢å¼•ï¼Œæœ‰å¯èƒ½ä¼šè§¦å‘å›è¡¨æŸ¥è¯¢ï¼Œå°½é‡é¿å…ä½¿ç”¨ select *ï¼Œå°½é‡åœ¨è¿”å›çš„åˆ—ä¸­éƒ½åŒ…å«æ·»åŠ ç´¢å¼•çš„å­—æ®µ&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š**MYSQL è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œè¶…å¤§åˆ†é¡µä¸€èˆ¬éƒ½æ˜¯åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† limit åˆ†é¡µæŸ¥è¯¢ï¼Œå¹¶ä¸”éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œè¿™ä¸ªæ—¶å€™æ•ˆç‡å°±å¾ˆä½ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨è¦†ç›–ç´¢å¼•å’Œå­æŸ¥è¯¢æ¥è§£å†³&lt;/p&gt;
&lt;p&gt;å…ˆåˆ†é¡µæŸ¥è¯¢æ•°æ®çš„ id å­—æ®µï¼Œç¡®å®šäº† id ä¹‹åï¼Œå†ç”¨å­æŸ¥è¯¢æ¥è¿‡æ»¤ï¼ŒåªæŸ¥è¯¢è¿™ä¸ª id åˆ—è¡¨ä¸­çš„æ•°æ®å°±å¯ä»¥äº†&lt;/p&gt;
&lt;p&gt;å› ä¸ºæŸ¥è¯¢ id çš„æ—¶å€™ï¼Œèµ°çš„è¦†ç›–ç´¢å¼•ï¼Œæ‰€ä»¥æ•ˆç‡å¯ä»¥æå‡å¾ˆå¤š&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** ç´¢å¼•åˆ›å»ºåŸåˆ™æœ‰å“ªäº›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œè¿™ä¸ªæƒ…å†µæœ‰å¾ˆå¤šï¼Œä¸è¿‡éƒ½æœ‰ä¸€ä¸ªå¤§å‰æï¼Œå°±æ˜¯è¡¨ä¸­çš„æ•°æ®è¦è¶…è¿‡ 10 ä¸‡ä»¥ä¸Šï¼Œæˆ‘ä»¬æ‰ä¼šåˆ›å»ºç´¢å¼•ï¼Œå¹¶ä¸”æ·»åŠ ç´¢å¼•çš„å­—æ®µæ˜¯æŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹çš„å­—æ®µï¼Œä¸€èˆ¬ä¹Ÿæ˜¯åƒä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œæ’åºå­—æ®µæˆ–åˆ†ç»„çš„å­—æ®µè¿™äº›ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å°±æ˜¯ï¼Œæˆ‘ä»¬é€šå¸¸åˆ›å»ºç´¢å¼•çš„æ—¶å€™éƒ½æ˜¯ä½¿ç”¨å¤åˆç´¢å¼•æ¥åˆ›å»ºï¼Œä¸€æ¡ sql çš„è¿”å›å€¼ï¼Œå°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œå¦‚æœå­—æ®µçš„åŒºåˆ†åº¦ä¸é«˜çš„è¯ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæŠŠå®ƒæ”¾åœ¨ç»„åˆç´¢å¼•åé¢çš„å­—æ®µã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæŸä¸€ä¸ªå­—æ®µçš„å†…å®¹è¾ƒé•¿ï¼Œæˆ‘ä»¬ä¼šè€ƒè™‘ä½¿ç”¨å‰ç¼€ç´¢å¼•æ¥ä½¿ç”¨ï¼Œå½“ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—æ®µéƒ½è¦æ·»åŠ ç´¢å¼•ï¼Œè¿™ä¸ªç´¢å¼•çš„æ•°é‡ä¹Ÿè¦æ§åˆ¶ï¼Œå› ä¸ºæ·»åŠ ç´¢å¼•ä¹Ÿä¼šå¯¼è‡´æ–°å¢æ”¹çš„é€Ÿåº¦å˜æ…¢ã€‚&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œè¿™ä¸ªæƒ…å†µæ¯”è¾ƒå¤šï¼Œæˆ‘è¯´ä¸€äº›è‡ªå·±çš„ç»éªŒï¼Œä»¥å‰é‡åˆ°è¿‡çš„&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ï¼Œç´¢å¼•åœ¨ä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰éµå¾ªæœ€å·¦åŒ¹é…æ³•åˆ™ï¼Œç¬¬äºŒä¸ªæ˜¯ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¦‚æœ % å·åœ¨å‰é¢ä¹Ÿä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚å¦‚æœåœ¨æ·»åŠ ç´¢å¼•çš„å­—æ®µä¸Šè¿›è¡Œäº†è¿ç®—æ“ä½œæˆ–è€…ç±»å‹è½¬æ¢ä¹Ÿéƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¹‹å‰è¿˜é‡åˆ°è¿‡ä¸€ä¸ªå°±æ˜¯ï¼Œå¦‚æœä½¿ç”¨äº†å¤åˆç´¢å¼•ï¼Œä¸­é—´ä½¿ç”¨äº†èŒƒå›´æŸ¥è¯¢ï¼Œå³è¾¹çš„æ¡ä»¶ç´¢å¼•ä¹Ÿä¼šå¤±æ•ˆ&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæƒ³è¦åˆ¤æ–­å‡ºè¿™æ¡ sql æ˜¯å¦æœ‰ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ explain æ‰§è¡Œè®¡åˆ’æ¥åˆ†æ&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š**sql çš„ä¼˜åŒ–çš„ç»éªŒ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œè¿™ä¸ªåœ¨é¡¹ç›®è¿˜æ˜¯æŒºå¸¸è§çš„ï¼Œå½“ç„¶å¦‚æœç›´è¯´ sql ä¼˜åŒ–çš„è¯ï¼Œæˆ‘ä»¬ä¼šä»è¿™å‡ æ–¹é¢è€ƒè™‘ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;p&gt;å»ºè¡¨çš„æ—¶å€™ã€ä½¿ç”¨ç´¢å¼•ã€sql è¯­å¥çš„ç¼–å†™ã€ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯å¦‚æœé‡æ¯”è¾ƒå¤§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘åˆ†åº“åˆ†è¡¨&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½ ä»¬æ˜¯å¦‚ä½•ä¼˜åŒ–çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** è¿™ä¸ªæˆ‘ä»¬ä¸»è¦å‚è€ƒçš„é˜¿é‡Œå‡ºçš„é‚£ä¸ªå¼€å‘æ‰‹å†Œã€Šåµ©å±±ç‰ˆã€‹ï¼Œå°±æ¯”å¦‚ï¼Œåœ¨å®šä¹‰å­—æ®µçš„æ—¶å€™éœ€è¦ç»“åˆå­—æ®µçš„å†…å®¹æ¥é€‰æ‹©åˆé€‚çš„ç±»å‹ï¼Œå¦‚æœæ˜¯æ•°å€¼çš„è¯ï¼Œåƒ tinyintã€int ã€bigint è¿™äº›ç±»å‹ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¹Ÿæ˜¯ç»“åˆå­˜å‚¨çš„å†…å®¹æ¥é€‰æ‹© char å’Œ varchar æˆ–è€… text ç±»å‹&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** é‚£åœ¨ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™ï¼Œæ˜¯å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äººï¼š&lt;/strong&gt;ã€å‚è€ƒç´¢å¼•åˆ›å»ºåŸåˆ™    è¿›è¡Œæè¿°ã€‘&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** ä½ å¹³æ—¶å¯¹ sql è¯­å¥åšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œè¿™ä¸ªä¹Ÿæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ SELECT è¯­å¥åŠ¡å¿…æŒ‡æ˜å­—æ®µåç§°ï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ select * ï¼Œè¿˜æœ‰å°±æ˜¯è¦æ³¨æ„ SQL è¯­å¥é¿å…é€ æˆç´¢å¼•å¤±æ•ˆçš„å†™æ³•ï¼›å¦‚æœæ˜¯èšåˆæŸ¥è¯¢ï¼Œå°½é‡ç”¨ union all ä»£æ›¿ union ï¼Œunion ä¼šå¤šä¸€æ¬¡è¿‡æ»¤ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼›å¦‚æœæ˜¯è¡¨å…³è”çš„è¯ï¼Œå°½é‡ä½¿ç”¨ innerjoin ï¼Œä¸è¦ä½¿ç”¨ç”¨ left join right joinï¼Œå¦‚å¿…é¡»ä½¿ç”¨ ä¸€å®šè¦ä»¥å°è¡¨ä¸ºé©±åŠ¨&lt;/p&gt;
&lt;p&gt;** é¢è¯•å®˜ï¼š** äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥è¯¦ç»†è¯´ä¸€ä¸‹å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï¼Œè¿™ä¸ªæ¯”è¾ƒæ¸…æ¥šï¼ŒACIDï¼Œåˆ†åˆ«æŒ‡çš„æ˜¯ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼›æˆ‘ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;p&gt;A å‘ B è½¬è´¦ 500ï¼Œè½¬è´¦æˆåŠŸï¼ŒA æ‰£é™¤ 500 å…ƒï¼ŒB å¢åŠ  500 å…ƒï¼ŒåŸå­æ“ä½œä½“ç°åœ¨è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥&lt;/p&gt;
&lt;p&gt;åœ¨è½¬è´¦çš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®è¦ä¸€è‡´ï¼ŒA æ‰£é™¤äº† 500ï¼ŒB å¿…é¡»å¢åŠ  500&lt;/p&gt;
&lt;p&gt;åœ¨è½¬è´¦çš„è¿‡ç¨‹ä¸­ï¼Œéš”ç¦»æ€§ä½“ç°åœ¨ A åƒ B è½¬è´¦ï¼Œä¸èƒ½å—å…¶ä»–äº‹åŠ¡å¹²æ‰°&lt;/p&gt;
&lt;p&gt;åœ¨è½¬è´¦çš„è¿‡ç¨‹ä¸­ï¼ŒæŒä¹…æ€§ä½“ç°åœ¨äº‹åŠ¡æäº¤åï¼Œè¦æŠŠæ•°æ®æŒä¹…åŒ–ï¼ˆå¯ä»¥è¯´æ˜¯è½ç›˜æ“ä½œï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šå¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶å‘è¿›è¡Œæ˜¯ç»å¸¸å‘ç”Ÿçš„ï¼Œå¹¶å‘ä¹Ÿæ˜¯å¿…ç„¶çš„ï¼Œæœ‰å¯èƒ½å¯¼è‡´ä¸€äº›é—®é¢˜&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ˜¯è„è¯»ï¼Œ å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¿™ä¸ªæ•°æ®ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°çš„è¿™ä¸ªæ•°æ®æ˜¯ â€œè„æ•°æ®â€ï¼Œä¾æ® â€œè„æ•°æ®â€ æ‰€åšçš„æ“ä½œå¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒæ˜¯ä¸å¯é‡å¤è¯»ï¼šæ¯”å¦‚åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚è¿™å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„æƒ…å†µï¼Œå› æ­¤ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰æ˜¯å¹»è¯»ï¼ˆPhantom readï¼‰ï¼šå¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ï¼ˆT2ï¼‰æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šæ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜å‘¢ï¼ŸMySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šè§£å†³æ–¹æ¡ˆæ˜¯å¯¹äº‹åŠ¡è¿›è¡Œéš”ç¦»&lt;/p&gt;
&lt;p&gt;MySQL æ”¯æŒå››ç§éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ˜¯ï¼Œæœªæäº¤è¯»ï¼ˆread uncommittedï¼‰å®ƒè§£å†³ä¸äº†åˆšæ‰æå‡ºçš„æ‰€æœ‰é—®é¢˜ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­ä¹Ÿä¸ç”¨è¿™ä¸ªã€‚ç¬¬äºŒä¸ªæ˜¯è¯»å·²æäº¤ï¼ˆread committedï¼‰å®ƒèƒ½è§£å†³è„è¯»çš„é—®é¢˜çš„ï¼Œä½†æ˜¯è§£å†³ä¸äº†ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚ç¬¬ä¸‰ä¸ªæ˜¯å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å®ƒèƒ½è§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯è§£å†³ä¸äº†å¹»è¯»ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ mysql é»˜è®¤çš„éš”ç¦»çº§åˆ«ã€‚ç¬¬å››ä¸ªæ˜¯ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰å®ƒå¯ä»¥è§£å†³åˆšæ‰æå‡ºæ¥çš„æ‰€æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç”±äºè®©æ˜¯äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œçš„ï¼Œæ€§èƒ½æ¯”è¾ƒä½ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨çš„éƒ½æ˜¯ mysql é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼šå¯é‡å¤è¯»&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šundo log å’Œ redo log çš„åŒºåˆ«&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå¥½çš„ï¼Œå…¶ä¸­ redo log æ—¥å¿—è®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼ŒæœåŠ¡å®•æœºå¯ç”¨æ¥åŒæ­¥æ•°æ®ï¼Œè€Œ undo log ä¸åŒï¼Œå®ƒä¸»è¦è®°å½•çš„æ˜¯é€»è¾‘æ—¥å¿—ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶ï¼Œé€šè¿‡é€†æ“ä½œæ¢å¤åŸæ¥çš„æ•°æ®ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ é™¤ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨ undo log æ—¥å¿—æ–‡ä»¶ä¸­æ–°å¢ä¸€æ¡ delete è¯­å¥ï¼Œå¦‚æœå‘ç”Ÿå›æ»šå°±æ‰§è¡Œé€†æ“ä½œï¼›&lt;/p&gt;
&lt;p&gt;redo log ä¿è¯äº†äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œundo log ä¿è¯äº†äº‹åŠ¡çš„åŸå­æ€§å’Œä¸€è‡´æ€§&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šäº‹åŠ¡ä¸­çš„éš”ç¦»æ€§æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢ï¼Ÿ(ä½ è§£é‡Šä¸€ä¸‹ MVCC)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šäº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯ç”±é”å’Œ mvcc å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ mvcc çš„æ„æ€æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚æŒ‡ç»´æŠ¤ä¸€ä¸ªæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä½¿å¾—è¯»å†™æ“ä½œæ²¡æœ‰å†²çªï¼Œå®ƒçš„åº•å±‚å®ç°ä¸»è¦æ˜¯åˆ†ä¸ºäº†ä¸‰ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªæ˜¯éšè—å­—æ®µï¼Œç¬¬äºŒä¸ªæ˜¯ undo log æ—¥å¿—ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ readView è¯»è§†å›¾&lt;/p&gt;
&lt;p&gt;éšè—å­—æ®µæ˜¯æŒ‡ï¼šåœ¨ mysql ä¸­ç»™æ¯ä¸ªè¡¨éƒ½è®¾ç½®äº†éšè—å­—æ®µï¼Œæœ‰ä¸€ä¸ªæ˜¯ trx_id (äº‹åŠ¡ id)ï¼Œè®°å½•æ¯ä¸€æ¬¡æ“ä½œçš„äº‹åŠ¡ idï¼Œæ˜¯è‡ªå¢çš„ï¼›å¦ä¸€ä¸ªå­—æ®µæ˜¯ roll_pointer (å›æ»šæŒ‡é’ˆ)ï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„äº‹åŠ¡ç‰ˆæœ¬è®°å½•åœ°å€&lt;/p&gt;
&lt;p&gt;undo log ä¸»è¦çš„ä½œç”¨æ˜¯è®°å½•å›æ»šæ—¥å¿—ï¼Œå­˜å‚¨è€ç‰ˆæœ¬æ•°æ®ï¼Œåœ¨å†…éƒ¨ä¼šå½¢æˆä¸€ä¸ªç‰ˆæœ¬é“¾ï¼Œåœ¨å¤šä¸ªäº‹åŠ¡å¹¶è¡Œæ“ä½œæŸä¸€è¡Œè®°å½•ï¼Œè®°å½•ä¸åŒäº‹åŠ¡ä¿®æ”¹æ•°æ®çš„ç‰ˆæœ¬ï¼Œé€šè¿‡ roll_pointer æŒ‡é’ˆå½¢æˆä¸€ä¸ªé“¾è¡¨&lt;/p&gt;
&lt;p&gt;readView è§£å†³çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡æŸ¥è¯¢é€‰æ‹©ç‰ˆæœ¬çš„é—®é¢˜ï¼Œåœ¨å†…éƒ¨å®šä¹‰äº†ä¸€äº›åŒ¹é…è§„åˆ™å’Œå½“å‰çš„ä¸€äº›äº‹åŠ¡ id åˆ¤æ–­è¯¥è®¿é—®é‚£ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œä¸åŒçš„éš”ç¦»çº§åˆ«å¿«ç…§è¯»æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ€ç»ˆçš„è®¿é—®çš„ç»“æœä¸ä¸€æ ·ã€‚å¦‚æœæ˜¯ rc éš”ç¦»çº§åˆ«ï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”Ÿæˆ ReadViewï¼Œå¦‚æœæ˜¯ rr éš”ç¦»çº§åˆ«ä»…åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”Ÿæˆ ReadViewï¼Œåç»­å¤ç”¨&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šMySQL ä¸»ä»åŒæ­¥åŸç†&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šMySQL ä¸»ä»å¤åˆ¶çš„æ ¸å¿ƒå°±æ˜¯äºŒè¿›åˆ¶æ—¥å¿— (DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰è¯­å¥å’Œ DMLï¼ˆæ•°æ®æ“çºµè¯­è¨€ï¼‰è¯­å¥)ï¼Œå®ƒçš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ï¼šä¸»åº“åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šæŠŠæ•°æ®å˜æ›´è®°å½•åœ¨äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ Binlog ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒï¼šä»åº“è¯»å–ä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ Binlog ï¼Œå†™å…¥åˆ°ä»åº“çš„ä¸­ç»§æ—¥å¿— Relay Log ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ï¼šä»åº“é‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†æ”¹å˜åæ˜ å®ƒè‡ªå·±çš„æ•°æ®&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šä½ ä»¬é¡¹ç›®ç”¨è¿‡ MySQL çš„åˆ†åº“åˆ†è¡¨å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½æ˜¯å¾®æœåŠ¡å¼€å‘ï¼Œæ¯ä¸ªå¾®æœåŠ¡å¯¹åº”äº†ä¸€ä¸ªæ•°æ®åº“ï¼Œæ˜¯æ ¹æ®ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†çš„ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯å‚ç›´æ‹†åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šé‚£ä½ ä¹‹å‰ä½¿ç”¨è¿‡æ°´å¹³åˆ†åº“å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œè¿™ä¸ªæ˜¯ä½¿ç”¨è¿‡çš„ï¼Œæˆ‘ä»¬å½“æ—¶çš„ä¸šåŠ¡æ˜¯ (xxx)ï¼Œä¸€å¼€å§‹ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å•åº“ï¼Œåæ¥è¿™ä¸ªä¸šåŠ¡é€æ¸å‘å±•ï¼Œä¸šåŠ¡é‡ä¸Šæ¥çš„å¾ˆè¿…é€Ÿï¼Œå…¶ä¸­ (xx) è¡¨å·²ç»å­˜æ”¾äº†è¶…è¿‡ 1000 ä¸‡çš„æ•°æ®ï¼Œæˆ‘ä»¬åšäº†å¾ˆå¤šä¼˜åŒ–ä¹Ÿä¸å¥½ä½¿ï¼Œæ€§èƒ½ä¾ç„¶å¾ˆæ…¢ï¼Œæ‰€ä»¥å½“æ—¶å°±ä½¿ç”¨äº†æ°´å¹³åˆ†åº“ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€å¼€å§‹å…ˆåšäº† 3 å°æœåŠ¡å™¨å¯¹åº”äº† 3 ä¸ªæ•°æ®åº“ï¼Œç”±äºåº“å¤šäº†ï¼Œéœ€è¦åˆ†ç‰‡ï¼Œæˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„ mycat æ¥ä½œä¸ºæ•°æ®åº“çš„ä¸­é—´ä»¶ã€‚æ•°æ®éƒ½æ˜¯æŒ‰ç…§ idï¼ˆè‡ªå¢ï¼‰å–æ¨¡çš„æ–¹å¼æ¥å­˜å–çš„ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œé‚£äº›æ—§æ•°æ®ï¼Œæˆ‘ä»¬åšäº†ä¸€äº›æ¸…æ´—çš„å·¥ä½œï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯æŒ‰ç…§ id å–æ¨¡è§„åˆ™åˆ†åˆ«å­˜å‚¨åˆ°äº†å„ä¸ªæ•°æ®åº“ä¸­ï¼Œå¥½å¤„å°±æ˜¯å¯ä»¥è®©å„ä¸ªæ•°æ®åº“åˆ†æ‘Šå­˜å‚¨å’Œè¯»å–çš„å‹åŠ›ï¼Œè§£å†³äº†æˆ‘ä»¬å½“æ—¶æ€§èƒ½çš„é—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
</content>
        <category term="é¢ç»" scheme="http://127.0.0.1/categories/interview/" />
        <category term="Mysql" scheme="http://127.0.0.1/tags/Mysql/" />
        <updated>2023-08-05T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://127.0.0.1/interview/Redis%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/</id>
        <title>Redisç›¸å…³é¢è¯•é¢˜</title>
        <link rel="alternate" href="http://127.0.0.1/interview/Redis%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/"/>
        <content type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï½ï½ï¼Œæˆ‘æƒ³ä¸€ä¸‹&lt;/p&gt;
&lt;p&gt;ç¼“å­˜ç©¿é€æ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®š&lt;strong&gt;ä¸å­˜åœ¨&lt;/strong&gt;çš„æ•°æ®ï¼Œå¦‚æœä»å­˜å‚¨å±‚æŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ° DB å»æŸ¥è¯¢ï¼Œå¯èƒ½å¯¼è‡´ DB æŒ‚æ‰ã€‚è¿™ç§æƒ…å†µå¤§æ¦‚ç‡æ˜¯é­åˆ°äº†æ”»å‡»ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆçš„è¯ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½ä¼šç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥è§£å†³å®ƒ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šå¥½çš„ï¼Œä½ èƒ½ä»‹ç»ä¸€ä¸‹å¸ƒéš†è¿‡æ»¤å™¨å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œæ˜¯è¿™æ ·ï½&lt;/p&gt;
&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ä¸»è¦æ˜¯ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚æˆ‘ä»¬å½“æ—¶ä½¿ç”¨çš„æ˜¯ redisson å®ç°çš„å¸ƒéš†è¿‡æ»¤å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒçš„åº•å±‚ä¸»è¦æ˜¯å…ˆå»åˆå§‹åŒ–ä¸€ä¸ªæ¯”è¾ƒå¤§æ•°ç»„ï¼Œé‡Œé¢å­˜æ”¾çš„äºŒè¿›åˆ¶ 0 æˆ– 1ã€‚åœ¨ä¸€å¼€å§‹éƒ½æ˜¯ 0ï¼Œå½“ä¸€ä¸ª key æ¥äº†ä¹‹åç»è¿‡ 3 æ¬¡ hash è®¡ç®—ï¼Œæ¨¡äºæ•°ç»„é•¿åº¦æ‰¾åˆ°æ•°æ®çš„ä¸‹æ ‡ç„¶åæŠŠæ•°ç»„ä¸­åŸæ¥çš„ 0 æ”¹ä¸º 1ï¼Œè¿™æ ·çš„è¯ï¼Œä¸‰ä¸ªæ•°ç»„çš„ä½ç½®å°±èƒ½æ ‡æ˜ä¸€ä¸ª key çš„å­˜åœ¨ã€‚æŸ¥æ‰¾çš„è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå¸ƒéš†è¿‡æ»¤å™¨æœ‰å¯èƒ½ä¼šäº§ç”Ÿä¸€å®šçš„è¯¯åˆ¤ï¼Œæˆ‘ä»¬ä¸€èˆ¬å¯ä»¥è®¾ç½®è¿™ä¸ªè¯¯åˆ¤ç‡ï¼Œå¤§æ¦‚ä¸ä¼šè¶…è¿‡ 5%ï¼Œå…¶å®è¿™ä¸ªè¯¯åˆ¤æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œè¦ä¸å°±å¾—å¢åŠ æ•°ç»„çš„é•¿åº¦ï¼Œå…¶å®å·²ç»ç®—æ˜¯å¾ˆåˆ’åˆ†äº†ï¼Œ5% ä»¥å†…çš„è¯¯åˆ¤ç‡ä¸€èˆ¬çš„é¡¹ç›®ä¹Ÿèƒ½æ¥å—ï¼Œä¸è‡³äºé«˜å¹¶å‘ä¸‹å‹å€’æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼ï¼&lt;/p&gt;
&lt;p&gt;ç¼“å­˜å‡»ç©¿çš„æ„æ€æ˜¯å¯¹äºè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„ keyï¼Œç¼“å­˜åœ¨æŸä¸ªæ—¶é—´ç‚¹è¿‡æœŸçš„æ—¶å€™ï¼Œæ°å¥½è¿™æ—¶é—´ç‚¹å¯¹è¿™ä¸ª Key æœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚è¿‡æ¥ï¼Œè¿™äº›è¯·æ±‚å‘ç°ç¼“å­˜è¿‡æœŸä¸€èˆ¬éƒ½ä¼šä»åç«¯ DB åŠ è½½æ•°æ®å¹¶å›è®¾åˆ°ç¼“å­˜ï¼Œè¿™ä¸ªæ—¶å€™å¤§å¹¶å‘çš„è¯·æ±‚å¯èƒ½ä¼šç¬é—´æŠŠ DB å‹å®ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€å¯ä»¥ä½¿ç”¨äº’æ–¥é”ï¼šå½“ç¼“å­˜å¤±æ•ˆæ—¶ï¼Œä¸ç«‹å³å» load dbï¼Œå…ˆä½¿ç”¨å¦‚ Redis çš„ setnx å»è®¾ç½®ä¸€ä¸ªäº’æ–¥é”ï¼Œå½“æ“ä½œæˆåŠŸè¿”å›æ—¶å†è¿›è¡Œ load db çš„æ“ä½œå¹¶å›è®¾ç¼“å­˜ï¼Œå¦åˆ™é‡è¯• get ç¼“å­˜çš„æ–¹æ³•&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒç§æ–¹æ¡ˆå¯ä»¥è®¾ç½®å½“å‰ key é€»è¾‘è¿‡æœŸï¼Œå¤§æ¦‚æ˜¯æ€è·¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;â‘ ï¼šåœ¨è®¾ç½® key çš„æ—¶å€™ï¼Œè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´å­—æ®µä¸€å—å­˜å…¥ç¼“å­˜ä¸­ï¼Œä¸ç»™å½“å‰ key è®¾ç½®è¿‡æœŸæ—¶é—´&lt;/p&gt;
&lt;p&gt;â‘¡ï¼šå½“æŸ¥è¯¢çš„æ—¶å€™ï¼Œä» redis å–å‡ºæ•°æ®ååˆ¤æ–­æ—¶é—´æ˜¯å¦è¿‡æœŸ&lt;/p&gt;
&lt;p&gt;â‘¢ï¼šå¦‚æœè¿‡æœŸåˆ™å¼€é€šå¦å¤–ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œå½“å‰çº¿ç¨‹æ­£å¸¸è¿”å›æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ä¸æ˜¯æœ€æ–°&lt;/p&gt;
&lt;p&gt;å½“ç„¶ä¸¤ç§æ–¹æ¡ˆå„æœ‰åˆ©å¼Šï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœé€‰æ‹©æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œå»ºè®®ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆï¼Œæ€§èƒ½ä¸Šå¯èƒ½æ²¡é‚£ä¹ˆé«˜ï¼Œé”éœ€è¦ç­‰ï¼Œä¹Ÿæœ‰å¯èƒ½äº§ç”Ÿæ­»é”çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;å¦‚æœé€‰æ‹© key çš„é€»è¾‘åˆ é™¤ï¼Œåˆ™ä¼˜å…ˆè€ƒè™‘çš„é«˜å¯ç”¨æ€§ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯æ•°æ®åŒæ­¥è¿™å—åšä¸åˆ°å¼ºä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼ï¼&lt;/p&gt;
&lt;p&gt;ç¼“å­˜é›ªå´©æ„æ€æ˜¯è®¾ç½®ç¼“å­˜æ—¶é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»åŒæ—¶å¤±æ•ˆï¼Œè¯·æ±‚å…¨éƒ¨è½¬å‘åˆ° DBï¼ŒDB ç¬æ—¶å‹åŠ›è¿‡é‡é›ªå´©ã€‚ä¸ç¼“å­˜å‡»ç©¿çš„åŒºåˆ«ï¼šé›ªå´©æ˜¯å¾ˆå¤š keyï¼Œå‡»ç©¿æ˜¯æŸä¸€ä¸ª key ç¼“å­˜ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆä¸»è¦æ˜¯å¯ä»¥å°†ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ï¼Œæ¯”å¦‚å¯ä»¥åœ¨åŸæœ‰çš„å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªéšæœºå€¼ï¼Œæ¯”å¦‚ 1-5 åˆ†é’Ÿéšæœºï¼Œè¿™æ ·æ¯ä¸€ä¸ªç¼“å­˜çš„è¿‡æœŸæ—¶é—´çš„é‡å¤ç‡å°±ä¼šé™ä½ï¼Œå°±å¾ˆéš¾å¼•å‘é›†ä½“å¤±æ•ˆçš„äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šredis åšä¸ºç¼“å­˜ï¼Œmysql çš„æ•°æ®å¦‚ä½•ä¸ redis è¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼å°±è¯´æˆ‘æœ€è¿‘åšçš„è¿™ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰ xxxxï¼ˆ&lt;strong&gt;æ ¹æ®è‡ªå·±çš„ç®€å†ä¸Šå†™&lt;/strong&gt;ï¼‰çš„åŠŸèƒ½ï¼Œéœ€è¦è®©æ•°æ®åº“ä¸ redis é«˜åº¦ä¿æŒä¸€è‡´ï¼Œå› ä¸ºè¦æ±‚æ—¶æ•ˆæ€§æ¯”è¾ƒé«˜ï¼Œæˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„è¯»å†™é”ä¿è¯çš„å¼ºä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ redisson å®ç°çš„è¯»å†™é”ï¼Œåœ¨è¯»çš„æ—¶å€™æ·»åŠ å…±äº«é”ï¼Œå¯ä»¥ä¿è¯è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ã€‚å½“æˆ‘ä»¬æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œæ·»åŠ æ’ä»–é”ï¼Œå®ƒæ˜¯è¯»å†™ï¼Œè¯»è¯»éƒ½äº’æ–¥ï¼Œè¿™æ ·å°±èƒ½ä¿è¯åœ¨å†™æ•°æ®çš„åŒæ—¶æ˜¯ä¸ä¼šè®©å…¶ä»–çº¿ç¨‹è¯»æ•°æ®çš„ï¼Œé¿å…äº†è„æ•°æ®ã€‚è¿™é‡Œé¢éœ€è¦æ³¨æ„çš„æ˜¯è¯»æ–¹æ³•å’Œå†™æ–¹æ³•ä¸Šéœ€è¦ä½¿ç”¨åŒä¸€æŠŠé”æ‰è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šé‚£è¿™ä¸ªæ’ä»–é”æ˜¯å¦‚ä½•ä¿è¯è¯»å†™ã€è¯»è¯»äº’æ–¥çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå…¶å®æ’ä»–é”åº•å±‚ä½¿ç”¨ä¹Ÿæ˜¯ setnxï¼Œä¿è¯äº†åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œé”ä½çš„æ–¹æ³•&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šä½ å¬è¯´è¿‡å»¶æ—¶åŒåˆ å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå»¶è¿ŸåŒåˆ ï¼Œå¦‚æœæ˜¯å†™æ“ä½œï¼Œæˆ‘ä»¬å…ˆæŠŠç¼“å­˜ä¸­çš„æ•°æ®åˆ é™¤ï¼Œç„¶åæ›´æ–°æ•°æ®åº“ï¼Œæœ€åå†å»¶æ—¶åˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå…¶ä¸­è¿™ä¸ªå»¶æ—¶å¤šä¹…ä¸å¤ªå¥½ç¡®å®šï¼Œåœ¨å»¶æ—¶çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°è„æ•°æ®ï¼Œå¹¶ä¸èƒ½ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œæ‰€ä»¥æ²¡æœ‰é‡‡ç”¨å®ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šredis åšä¸ºç¼“å­˜ï¼Œmysql çš„æ•°æ®å¦‚ä½•ä¸ redis è¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼å°±è¯´æˆ‘æœ€è¿‘åšçš„è¿™ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰ xxxxï¼ˆ&lt;strong&gt;æ ¹æ®è‡ªå·±çš„ç®€å†ä¸Šå†™&lt;/strong&gt;ï¼‰çš„åŠŸèƒ½ï¼Œæ•°æ®åŒæ­¥å¯ä»¥æœ‰ä¸€å®šçš„å»¶æ—¶ï¼ˆç¬¦åˆå¤§éƒ¨åˆ†ä¸šåŠ¡ï¼‰&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„é˜¿é‡Œçš„ canal ç»„ä»¶å®ç°æ•°æ®åŒæ­¥ï¼šä¸éœ€è¦æ›´æ”¹ä¸šåŠ¡ä»£ç ï¼Œéƒ¨ç½²ä¸€ä¸ª canal æœåŠ¡ã€‚canal æœåŠ¡æŠŠè‡ªå·±ä¼ªè£…æˆ mysql çš„ä¸€ä¸ªä»èŠ‚ç‚¹ï¼Œå½“ mysql æ•°æ®æ›´æ–°ä»¥åï¼Œcanal ä¼šè¯»å– binlog æ•°æ®ï¼Œç„¶ååœ¨é€šè¿‡ canal çš„å®¢æˆ·ç«¯è·å–åˆ°æ•°æ®ï¼Œæ›´æ–°ç¼“å­˜å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šredis åšä¸ºç¼“å­˜ï¼Œæ•°æ®çš„æŒä¹…åŒ–æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šåœ¨ Redis ä¸­æä¾›äº†ä¸¤ç§æ•°æ®æŒä¹…åŒ–çš„æ–¹å¼ï¼š1ã€RDB  2ã€AOF&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šè¿™ä¸¤ç§æŒä¹…åŒ–æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šRDB æ˜¯ä¸€ä¸ªå¿«ç…§æ–‡ä»¶ï¼Œå®ƒæ˜¯æŠŠ redis å†…å­˜å­˜å‚¨çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸Šï¼Œå½“ redis å®ä¾‹å®•æœºæ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œæ–¹ä¾¿ä» RDB çš„å¿«ç…§æ–‡ä»¶ä¸­æ¢å¤æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;AOF çš„å«ä¹‰æ˜¯è¿½åŠ æ–‡ä»¶ï¼Œå½“ redis æ“ä½œå†™å‘½ä»¤çš„æ—¶å€™ï¼Œéƒ½ä¼šå­˜å‚¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå½“ redis å®ä¾‹å®•æœºæ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œä¼šä»è¿™ä¸ªæ–‡ä»¶ä¸­å†æ¬¡æ‰§è¡Œä¸€éå‘½ä»¤æ¥æ¢å¤æ•°æ®&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šè¿™ä¸¤ç§æ–¹å¼ï¼Œå“ªç§æ¢å¤çš„æ¯”è¾ƒå¿«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šRDB å› ä¸ºæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ä½“ç§¯ä¹Ÿæ˜¯æ¯”è¾ƒå°çš„ï¼Œå®ƒæ¢å¤çš„æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯å®ƒæœ‰å¯èƒ½ä¼šä¸¢æ•°æ®ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨é¡¹ç›®ä¸­ä¹Ÿä¼šä½¿ç”¨ AOF æ¥æ¢å¤æ•°æ®ï¼Œè™½ç„¶ AOF æ¢å¤çš„é€Ÿåº¦æ…¢ä¸€äº›ï¼Œä½†æ˜¯å®ƒä¸¢æ•°æ®çš„é£é™©è¦å°å¾ˆå¤šï¼Œåœ¨ AOF æ–‡ä»¶ä¸­å¯ä»¥è®¾ç½®åˆ·ç›˜ç­–ç•¥ï¼Œæˆ‘ä»¬å½“æ—¶è®¾ç½®çš„å°±æ˜¯æ¯ç§’æ‰¹é‡å†™å…¥ä¸€æ¬¡å‘½ä»¤&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis çš„æ•°æ®è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï½ï¼Œåœ¨ redis ä¸­æä¾›äº†ä¸¤ç§æ•°æ®è¿‡æœŸåˆ é™¤ç­–ç•¥&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç§æ˜¯æƒ°æ€§åˆ é™¤ï¼Œåœ¨è®¾ç½®è¯¥ key è¿‡æœŸæ—¶é—´åï¼Œæˆ‘ä»¬ä¸å»ç®¡å®ƒï¼Œå½“éœ€è¦è¯¥ key æ—¶ï¼Œæˆ‘ä»¬åœ¨æ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸï¼Œæˆ‘ä»¬å°±åˆ æ‰å®ƒï¼Œåä¹‹è¿”å›è¯¥ keyã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒç§æ˜¯ å®šæœŸåˆ é™¤ï¼Œå°±æ˜¯è¯´æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬å°±å¯¹ä¸€äº› key è¿›è¡Œæ£€æŸ¥ï¼Œåˆ é™¤é‡Œé¢è¿‡æœŸçš„ key&lt;/p&gt;
&lt;p&gt;å®šæœŸæ¸…ç†çš„ä¸¤ç§æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SLOW æ¨¡å¼æ˜¯å®šæ—¶ä»»åŠ¡ï¼Œæ‰§è¡Œé¢‘ç‡é»˜è®¤ä¸º 10hzï¼Œæ¯æ¬¡ä¸è¶…è¿‡ 25msï¼Œä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ redis.conf çš„ &lt;strong&gt;hz&lt;/strong&gt; é€‰é¡¹æ¥è°ƒæ•´è¿™ä¸ªæ¬¡æ•°&lt;/li&gt;
&lt;li&gt;FAST æ¨¡å¼æ‰§è¡Œé¢‘ç‡ä¸å›ºå®šï¼Œæ¯æ¬¡äº‹ä»¶å¾ªç¯ä¼šå°è¯•æ‰§è¡Œï¼Œä½†ä¸¤æ¬¡é—´éš”ä¸ä½äº 2msï¼Œæ¯æ¬¡è€—æ—¶ä¸è¶…è¿‡ 1ms&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Redis çš„è¿‡æœŸåˆ é™¤ç­–ç•¥ï¼š&lt;strong&gt;æƒ°æ€§åˆ é™¤ + å®šæœŸåˆ é™¤&lt;/strong&gt;ä¸¤ç§ç­–ç•¥è¿›è¡Œé…åˆä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis çš„æ•°æ®æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œè¿™ä¸ªåœ¨ redis ä¸­æä¾›äº†å¾ˆå¤šç§ï¼Œé»˜è®¤æ˜¯ noevictionï¼Œä¸åˆ é™¤ä»»ä½•æ•°æ®ï¼Œå†…éƒ¨ä¸è¶³ç›´æ¥æŠ¥é”™&lt;/p&gt;
&lt;p&gt;æ˜¯å¯ä»¥åœ¨ redis çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè®¾ç½®çš„ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯ LRUï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ LFU&lt;/p&gt;
&lt;p&gt;LRU çš„æ„æ€å°±æ˜¯æœ€å°‘æœ€è¿‘ä½¿ç”¨ï¼Œç”¨å½“å‰æ—¶é—´å‡å»æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´ï¼Œè¿™ä¸ªå€¼è¶Šå¤§åˆ™æ·˜æ±°ä¼˜å…ˆçº§è¶Šé«˜ã€‚&lt;/p&gt;
&lt;p&gt;LFU çš„æ„æ€æ˜¯æœ€å°‘é¢‘ç‡ä½¿ç”¨ã€‚ä¼šç»Ÿè®¡æ¯ä¸ª key çš„è®¿é—®é¢‘ç‡ï¼Œå€¼è¶Šå°æ·˜æ±°ä¼˜å…ˆçº§è¶Šé«˜&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨é¡¹ç›®è®¾ç½®çš„ allkeys-lruï¼ŒæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ï¼ŒæŠŠä¸€äº›ç»å¸¸è®¿é—®çš„ key ç•™åœ¨ redis ä¸­&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šæ•°æ®åº“æœ‰ 1000 ä¸‡æ•°æ®ï¼ŒRedis åªèƒ½ç¼“å­˜ 20w æ•°æ®ï¼Œå¦‚ä½•ä¿è¯ Redis ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œæˆ‘æƒ³ä¸€ä¸‹ï½ï½&lt;/p&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨ allkeys-lru ï¼ˆæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ï¼‰æ·˜æ±°ç­–ç•¥ï¼Œé‚£ç•™ä¸‹æ¥çš„éƒ½æ˜¯ç»å¸¸è®¿é—®çš„çƒ­ç‚¹æ•°æ®&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis çš„å†…å­˜ç”¨å®Œäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï½ï¼Œè¿™ä¸ªè¦çœ‹ redis çš„æ•°æ®æ·˜æ±°ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Œå¦‚æœæ˜¯é»˜è®¤çš„é…ç½®ï¼Œredis å†…å­˜ç”¨å®Œä»¥ååˆ™ç›´æ¥æŠ¥é”™ã€‚æˆ‘ä»¬å½“æ—¶è®¾ç½®çš„ allkeys-lru ç­–ç•¥ã€‚æŠŠæœ€è¿‘æœ€å¸¸è®¿é—®çš„æ•°æ®ç•™åœ¨ç¼“å­˜ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis åˆ†å¸ƒå¼é”å¦‚ä½•å®ç°ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼Œåœ¨ redis ä¸­æä¾›äº†ä¸€ä¸ªå‘½ä»¤ setnx (SET if not exists)&lt;/p&gt;
&lt;p&gt;ç”±äº redis çš„å•çº¿ç¨‹çš„ï¼Œç”¨äº†å‘½ä»¤ä¹‹åï¼Œåªèƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹æŸä¸€ä¸ª key è®¾ç½®å€¼ï¼Œåœ¨æ²¡æœ‰è¿‡æœŸæˆ–åˆ é™¤ key çš„æ—¶å€™æ˜¯å…¶ä»–å®¢æˆ·ç«¯æ˜¯ä¸èƒ½è®¾ç½®è¿™ä¸ª key çš„&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šå¥½çš„ï¼Œé‚£ä½ å¦‚ä½•æ§åˆ¶ Redis å®ç°åˆ†å¸ƒå¼é”æœ‰æ•ˆæ—¶é•¿å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼Œçš„ç¡®ï¼Œredis çš„ setnx æŒ‡ä»¤ä¸å¥½æ§åˆ¶è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„ redis çš„ä¸€ä¸ªæ¡†æ¶ redisson å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ redisson ä¸­éœ€è¦æ‰‹åŠ¨åŠ é”ï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶é”çš„å¤±æ•ˆæ—¶é—´å’Œç­‰å¾…æ—¶é—´ï¼Œå½“é”ä½çš„ä¸€ä¸ªä¸šåŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæˆçš„æ—¶å€™ï¼Œåœ¨ redisson ä¸­å¼•å…¥äº†ä¸€ä¸ªçœ‹é—¨ç‹—æœºåˆ¶ï¼Œå°±æ˜¯è¯´æ¯éš”ä¸€æ®µæ—¶é—´å°±æ£€æŸ¥å½“å‰ä¸šåŠ¡æ˜¯å¦è¿˜æŒæœ‰é”ï¼Œå¦‚æœæŒæœ‰å°±å¢åŠ åŠ é”çš„æŒæœ‰æ—¶é—´ï¼Œå½“ä¸šåŠ¡æ‰§è¡Œå®Œæˆä¹‹åéœ€è¦ä½¿ç”¨é‡Šæ”¾é”å°±å¯ä»¥äº†&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œåœ¨é«˜å¹¶å‘ä¸‹ï¼Œä¸€ä¸ªä¸šåŠ¡æœ‰å¯èƒ½ä¼šæ‰§è¡Œå¾ˆå¿«ï¼Œå…ˆå®¢æˆ· 1 æŒæœ‰é”çš„æ—¶å€™ï¼Œå®¢æˆ· 2 æ¥äº†ä»¥åå¹¶ä¸ä¼šé©¬ä¸Šæ‹’ç»ï¼Œå®ƒä¼šè‡ªæ—‹ä¸æ–­å°è¯•è·å–é”ï¼Œå¦‚æœå®¢æˆ· 1 é‡Šæ”¾ä¹‹åï¼Œå®¢æˆ· 2 å°±å¯ä»¥é©¬ä¸ŠæŒæœ‰é”ï¼Œæ€§èƒ½ä¹Ÿå¾—åˆ°äº†æå‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šå¥½çš„ï¼Œredisson å®ç°çš„åˆ†å¸ƒå¼é”æ˜¯å¯é‡å…¥çš„å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼Œæ˜¯å¯ä»¥é‡å…¥çš„ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é¿å…æ­»é”çš„äº§ç”Ÿã€‚è¿™ä¸ªé‡å…¥å…¶å®åœ¨å†…éƒ¨å°±æ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰çº¿ç¨‹æŒæœ‰çš„é”ï¼Œå¦‚æœæ˜¯å½“å‰çº¿ç¨‹æŒæœ‰çš„é”å°±ä¼šè®¡æ•°ï¼Œå¦‚æœé‡Šæ”¾é”å°±ä¼šåœ¨è®¡ç®—ä¸Šå‡ä¸€ã€‚åœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™é‡‡ç”¨çš„ hash ç»“æ„ï¼Œå¤§ key å¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¸šåŠ¡è¿›è¡Œå®šåˆ¶ï¼Œå…¶ä¸­å° key æ˜¯å½“å‰çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼Œvalue æ˜¯å½“å‰çº¿ç¨‹é‡å…¥çš„æ¬¡æ•°&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šredisson å®ç°çš„åˆ†å¸ƒå¼é”èƒ½è§£å†³ä¸»ä»ä¸€è‡´æ€§çš„é—®é¢˜å—&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šè¿™ä¸ªæ˜¯ä¸èƒ½çš„ï¼Œæ¯”å¦‚ï¼Œå½“çº¿ç¨‹ 1 åŠ é”æˆåŠŸåï¼Œmaster èŠ‚ç‚¹æ•°æ®ä¼šå¼‚æ­¥å¤åˆ¶åˆ° slave èŠ‚ç‚¹ï¼Œæ­¤æ—¶å½“å‰æŒæœ‰ Redis é”çš„ master èŠ‚ç‚¹å®•æœºï¼Œslave èŠ‚ç‚¹è¢«æå‡ä¸ºæ–°çš„ master èŠ‚ç‚¹ï¼Œå‡å¦‚ç°åœ¨æ¥äº†ä¸€ä¸ªçº¿ç¨‹ 2ï¼Œå†æ¬¡åŠ é”ï¼Œä¼šåœ¨æ–°çš„ master èŠ‚ç‚¹ä¸ŠåŠ é”æˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶æŒæœ‰ä¸€æŠŠé”çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ redisson æä¾›çš„çº¢é”æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œä¸èƒ½åªåœ¨ä¸€ä¸ª redis å®ä¾‹ä¸Šåˆ›å»ºé”ï¼Œåº”è¯¥æ˜¯åœ¨å¤šä¸ª redis å®ä¾‹ä¸Šåˆ›å»ºé”ï¼Œå¹¶ä¸”è¦æ±‚åœ¨å¤§å¤šæ•° redis èŠ‚ç‚¹ä¸Šéƒ½æˆåŠŸåˆ›å»ºé”ï¼Œçº¢é”ä¸­è¦æ±‚æ˜¯ redis çš„èŠ‚ç‚¹æ•°é‡è¦è¿‡åŠã€‚è¿™æ ·å°±èƒ½é¿å…çº¿ç¨‹ 1 åŠ é”æˆåŠŸå master èŠ‚ç‚¹å®•æœºå¯¼è‡´çº¿ç¨‹ 2 æˆåŠŸåŠ é”åˆ°æ–°çš„ master èŠ‚ç‚¹ä¸Šçš„é—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨äº†çº¢é”ï¼Œå› ä¸ºéœ€è¦åŒæ—¶åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šéƒ½æ·»åŠ é”ï¼Œæ€§èƒ½å°±å˜çš„å¾ˆä½äº†ï¼Œå¹¶ä¸”è¿ç»´ç»´æŠ¤æˆæœ¬ä¹Ÿéå¸¸é«˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­ä¹Ÿä¸ä¼šç›´æ¥ä½¿ç”¨çº¢é”ï¼Œå¹¶ä¸”å®˜æ–¹ä¹Ÿæš‚æ—¶åºŸå¼ƒäº†è¿™ä¸ªçº¢é”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šå¥½çš„ï¼Œå¦‚æœä¸šåŠ¡éè¦ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;** å€™é€‰äººï¼š** å—¯ï½ï¼Œredis æœ¬èº«å°±æ˜¯æ”¯æŒé«˜å¯ç”¨çš„ï¼Œåšåˆ°å¼ºä¸€è‡´æ€§ï¼Œå°±éå¸¸å½±å“æ€§èƒ½ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæœ‰å¼ºä¸€è‡´æ€§è¦æ±‚é«˜çš„ä¸šåŠ¡ï¼Œå»ºè®®ä½¿ç”¨ zookeeper å®ç°çš„åˆ†å¸ƒå¼é”ï¼Œå®ƒæ˜¯å¯ä»¥ä¿è¯å¼ºä¸€è‡´æ€§çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis é›†ç¾¤æœ‰å“ªäº›æ–¹æ¡ˆï¼ŒçŸ¥é“å˜›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï½ï½ï¼Œåœ¨ Redis ä¸­æä¾›çš„é›†ç¾¤æ–¹æ¡ˆæ€»å…±æœ‰ä¸‰ç§ï¼šä¸»ä»å¤åˆ¶ã€å“¨å…µæ¨¡å¼ã€Redis åˆ†ç‰‡é›†ç¾¤&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šé‚£ä½ æ¥ä»‹ç»ä¸€ä¸‹ä¸»ä»åŒæ­¥&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼Œæ˜¯è¿™æ ·çš„ï¼Œå•èŠ‚ç‚¹ Redis çš„å¹¶å‘èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œè¦è¿›ä¸€æ­¥æé«˜ Redis çš„å¹¶å‘èƒ½åŠ›ï¼Œå¯ä»¥æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå®ç°è¯»å†™åˆ†ç¦»ã€‚ä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸»å¤šä»ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ•°æ®ï¼Œä»èŠ‚ç‚¹è´Ÿè´£è¯»æ•°æ®ï¼Œä¸»èŠ‚ç‚¹å†™å…¥æ•°æ®ä¹‹åï¼Œéœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°ä»èŠ‚ç‚¹ä¸­&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šèƒ½è¯´ä¸€ä¸‹ï¼Œä¸»ä»åŒæ­¥æ•°æ®çš„æµç¨‹&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï½ï½ï¼Œå¥½ï¼ä¸»ä»åŒæ­¥åˆ†ä¸ºäº†ä¸¤ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªæ˜¯å…¨é‡åŒæ­¥ï¼Œä¸€ä¸ªæ˜¯å¢é‡åŒæ­¥&lt;/p&gt;
&lt;p&gt;å…¨é‡åŒæ­¥æ˜¯æŒ‡ä»èŠ‚ç‚¹ç¬¬ä¸€æ¬¡ä¸ä¸»èŠ‚ç‚¹å»ºç«‹è¿æ¥çš„æ—¶å€™ä½¿ç”¨å…¨é‡åŒæ­¥ï¼Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ï¼šä»èŠ‚ç‚¹è¯·æ±‚ä¸»èŠ‚ç‚¹åŒæ­¥æ•°æ®ï¼Œå…¶ä¸­ä»èŠ‚ç‚¹ä¼šæºå¸¦è‡ªå·±çš„ replication id å’Œ offset åç§»é‡ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒï¼šä¸»èŠ‚ç‚¹åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œä¸»è¦åˆ¤æ–­çš„ä¾æ®å°±æ˜¯ï¼Œä¸»èŠ‚ç‚¹ä¸ä»èŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ª replication idï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±è¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡åŒæ­¥ï¼Œé‚£ä¸»èŠ‚ç‚¹å°±ä¼šæŠŠè‡ªå·±çš„ replication id å’Œ offset å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œè®©ä»èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ä¿æŒä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ï¼šåœ¨åŒæ—¶ä¸»èŠ‚ç‚¹ä¼šæ‰§è¡Œ bgsaveï¼Œç”Ÿæˆ rdb æ–‡ä»¶åï¼Œå‘é€ç»™ä»èŠ‚ç‚¹å»æ‰§è¡Œï¼Œä»èŠ‚ç‚¹å…ˆæŠŠè‡ªå·±çš„æ•°æ®æ¸…ç©ºï¼Œç„¶åæ‰§è¡Œä¸»èŠ‚ç‚¹å‘é€è¿‡æ¥çš„ rdb æ–‡ä»¶ï¼Œè¿™æ ·å°±ä¿æŒäº†ä¸€è‡´&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œå¦‚æœåœ¨ rdb ç”Ÿæˆæ‰§è¡ŒæœŸé—´ï¼Œä¾ç„¶æœ‰è¯·æ±‚åˆ°äº†ä¸»èŠ‚ç‚¹ï¼Œè€Œä¸»èŠ‚ç‚¹ä¼šä»¥å‘½ä»¤çš„æ–¹å¼è®°å½•åˆ°ç¼“å†²åŒºï¼Œç¼“å†²åŒºæ˜¯ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œæœ€åæŠŠè¿™ä¸ªæ—¥å¿—æ–‡ä»¶å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ä¸»èŠ‚ç‚¹ä¸ä»èŠ‚ç‚¹å®Œå…¨ä¸€è‡´äº†ï¼ŒåæœŸå†åŒæ­¥æ•°æ®çš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¾èµ–äºè¿™ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯å…¨é‡åŒæ­¥&lt;/p&gt;
&lt;p&gt;å¢é‡åŒæ­¥æŒ‡çš„æ˜¯ï¼Œå½“ä»èŠ‚ç‚¹æœåŠ¡é‡å¯ä¹‹åï¼Œæ•°æ®å°±ä¸ä¸€è‡´äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œä»èŠ‚ç‚¹ä¼šè¯·æ±‚ä¸»èŠ‚ç‚¹åŒæ­¥æ•°æ®ï¼Œä¸»èŠ‚ç‚¹è¿˜æ˜¯åˆ¤æ–­ä¸æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œä¸æ˜¯ç¬¬ä¸€æ¬¡å°±è·å–ä»èŠ‚ç‚¹çš„ offset å€¼ï¼Œç„¶åä¸»èŠ‚ç‚¹ä»å‘½ä»¤æ—¥å¿—ä¸­è·å– offset å€¼ä¹‹åçš„æ•°æ®ï¼Œå‘é€ç»™ä»èŠ‚ç‚¹è¿›è¡Œæ•°æ®åŒæ­¥&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šæ€ä¹ˆä¿è¯ Redis çš„é«˜å¹¶å‘é«˜å¯ç”¨&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šé¦–å…ˆå¯ä»¥æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå†åŠ ä¸Šä½¿ç”¨ redis ä¸­çš„å“¨å…µæ¨¡å¼ï¼Œå“¨å…µæ¨¡å¼å¯ä»¥å®ç°ä¸»ä»é›†ç¾¤çš„è‡ªåŠ¨æ•…éšœæ¢å¤ï¼Œé‡Œé¢å°±åŒ…å«äº†å¯¹ä¸»ä»æœåŠ¡çš„ç›‘æ§ã€è‡ªåŠ¨æ•…éšœæ¢å¤ã€é€šçŸ¥ï¼›å¦‚æœ master æ•…éšœï¼ŒSentinel ä¼šå°†ä¸€ä¸ª slave æå‡ä¸º masterã€‚å½“æ•…éšœå®ä¾‹æ¢å¤åä¹Ÿä»¥æ–°çš„ master ä¸ºä¸»ï¼›åŒæ—¶ Sentinel ä¹Ÿå……å½“ Redis å®¢æˆ·ç«¯çš„æœåŠ¡å‘ç°æ¥æºï¼Œå½“é›†ç¾¤å‘ç”Ÿæ•…éšœè½¬ç§»æ—¶ï¼Œä¼šå°†æœ€æ–°ä¿¡æ¯æ¨é€ç»™ Redis çš„å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ä¸€èˆ¬é¡¹ç›®éƒ½ä¼šé‡‡ç”¨å“¨å…µçš„æ¨¡å¼æ¥ä¿è¯ redis çš„é«˜å¹¶å‘é«˜å¯ç”¨&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šä½ ä»¬ä½¿ç”¨ redis æ˜¯å•ç‚¹è¿˜æ˜¯é›†ç¾¤ï¼Œå“ªç§é›†ç¾¤&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼ï¼Œæˆ‘ä»¬å½“æ—¶ä½¿ç”¨çš„æ˜¯ä¸»ä»ï¼ˆ1 ä¸» 1 ä»ï¼‰åŠ å“¨å…µã€‚ä¸€èˆ¬å•èŠ‚ç‚¹ä¸è¶…è¿‡ 10G å†…å­˜ï¼Œå¦‚æœ Redis å†…å­˜ä¸è¶³åˆ™å¯ä»¥ç»™ä¸åŒæœåŠ¡åˆ†é…ç‹¬ç«‹çš„ Redis ä¸»ä»èŠ‚ç‚¹ã€‚å°½é‡ä¸åšåˆ†ç‰‡é›†ç¾¤ã€‚å› ä¸ºé›†ç¾¤ç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”é›†ç¾¤ä¹‹é—´çš„å¿ƒè·³æ£€æµ‹å’Œæ•°æ®é€šä¿¡ä¼šæ¶ˆè€—å¤§é‡çš„ç½‘ç»œå¸¦å®½ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•ä½¿ç”¨ lua è„šæœ¬å’Œäº‹åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šredis é›†ç¾¤è„‘è£‚ï¼Œè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï¼ è¿™ä¸ªåœ¨é¡¹ç›®å¾ˆå°‘è§ï¼Œä¸è¿‡è„‘è£‚çš„é—®é¢˜æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨çš„æ˜¯ redis çš„å“¨å…µæ¨¡å¼é›†ç¾¤çš„&lt;/p&gt;
&lt;p&gt;æœ‰çš„æ—¶å€™ç”±äºç½‘ç»œç­‰åŸå› å¯èƒ½ä¼šå‡ºç°è„‘è£‚çš„æƒ…å†µï¼Œå°±æ˜¯è¯´ï¼Œç”±äº redis master èŠ‚ç‚¹å’Œ redis salve èŠ‚ç‚¹å’Œ sentinel å¤„äºä¸åŒçš„ç½‘ç»œåˆ†åŒºï¼Œä½¿å¾— sentinel æ²¡æœ‰èƒ½å¤Ÿå¿ƒè·³æ„ŸçŸ¥åˆ° masterï¼Œæ‰€ä»¥é€šè¿‡é€‰ä¸¾çš„æ–¹å¼æå‡äº†ä¸€ä¸ª salve ä¸º masterï¼Œè¿™æ ·å°±å­˜åœ¨äº†ä¸¤ä¸ª masterï¼Œå°±åƒå¤§è„‘åˆ†è£‚äº†ä¸€æ ·ï¼Œè¿™æ ·ä¼šå¯¼è‡´å®¢æˆ·ç«¯è¿˜åœ¨ old master é‚£é‡Œå†™å…¥æ•°æ®ï¼Œæ–°èŠ‚ç‚¹æ— æ³•åŒæ­¥æ•°æ®ï¼Œå½“ç½‘ç»œæ¢å¤åï¼Œsentinel ä¼šå°† old master é™ä¸º salveï¼Œè¿™æ—¶å†ä»æ–° master åŒæ­¥æ•°æ®ï¼Œè¿™ä¼šå¯¼è‡´ old master ä¸­çš„å¤§é‡æ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºè§£å†³çš„è¯ï¼Œæˆ‘è®°å¾—åœ¨ redis çš„é…ç½®ä¸­å¯ä»¥è®¾ç½®ï¼šç¬¬ä¸€å¯ä»¥è®¾ç½®æœ€å°‘çš„ salve èŠ‚ç‚¹ä¸ªæ•°ï¼Œæ¯”å¦‚è®¾ç½®è‡³å°‘è¦æœ‰ä¸€ä¸ªä»èŠ‚ç‚¹æ‰èƒ½åŒæ­¥æ•°æ®ï¼Œç¬¬äºŒä¸ªå¯ä»¥è®¾ç½®ä¸»ä»æ•°æ®å¤åˆ¶å’ŒåŒæ­¥çš„å»¶è¿Ÿæ—¶é—´ï¼Œè¾¾ä¸åˆ°è¦æ±‚å°±æ‹’ç»è¯·æ±‚ï¼Œå°±å¯ä»¥é¿å…å¤§é‡çš„æ•°æ®ä¸¢å¤±&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šredis çš„åˆ†ç‰‡é›†ç¾¤æœ‰ä»€ä¹ˆä½œç”¨&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šåˆ†ç‰‡é›†ç¾¤ä¸»è¦è§£å†³çš„æ˜¯ï¼Œæµ·é‡æ•°æ®å­˜å‚¨çš„é—®é¢˜ï¼Œé›†ç¾¤ä¸­æœ‰å¤šä¸ª masterï¼Œæ¯ä¸ª master ä¿å­˜ä¸åŒæ•°æ®ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ç»™æ¯ä¸ª master è®¾ç½®å¤šä¸ª slave èŠ‚ç‚¹ï¼Œå°±å¯ä»¥ç»§ç»­å¢å¤§é›†ç¾¤çš„é«˜å¹¶å‘èƒ½åŠ›ã€‚åŒæ—¶æ¯ä¸ª master ä¹‹é—´é€šè¿‡ ping ç›‘æµ‹å½¼æ­¤å¥åº·çŠ¶æ€ï¼Œå°±ç±»ä¼¼äºå“¨å…µæ¨¡å¼äº†ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤ä»»æ„èŠ‚ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ­£ç¡®èŠ‚ç‚¹&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis åˆ†ç‰‡é›†ç¾¤ä¸­æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨å’Œè¯»å–çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï½ï¼Œåœ¨ redis é›†ç¾¤ä¸­æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;p&gt;Redis é›†ç¾¤å¼•å…¥äº†å“ˆå¸Œæ§½çš„æ¦‚å¿µï¼Œæœ‰ 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªä¸»èŠ‚ç‚¹ç»‘å®šäº†ä¸€å®šèŒƒå›´çš„å“ˆå¸Œæ§½èŒƒå›´ï¼Œ key é€šè¿‡ CRC16 æ ¡éªŒåå¯¹ 16384 å–æ¨¡æ¥å†³å®šæ”¾ç½®å“ªä¸ªæ§½ï¼Œé€šè¿‡æ§½æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œå­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;å–å€¼çš„é€»è¾‘æ˜¯ä¸€æ ·çš„&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šRedis æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜é‚£ä¹ˆå¿«ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œè¿™ä¸ªæœ‰å‡ ä¸ªåŸå› å§ï½ï½ï½&lt;/p&gt;
&lt;p&gt;1ã€å®Œå…¨åŸºäºå†…å­˜çš„ï¼ŒC è¯­è¨€ç¼–å†™&lt;/p&gt;
&lt;p&gt;2ã€é‡‡ç”¨å•çº¿ç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯ç«äº‰æ¡ä»¶&lt;/p&gt;
&lt;p&gt;3ã€ä½¿ç”¨å¤šè·¯ I/O å¤ç”¨æ¨¡å‹ï¼Œéé˜»å¡ IO&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šbgsave å’Œ bgrewriteaof  éƒ½æ˜¯åœ¨&lt;strong&gt;åå°&lt;/strong&gt;æ‰§è¡Œæ“ä½œï¼Œä¸å½±å“ä¸»çº¿ç¨‹çš„æ­£å¸¸ä½¿ç”¨ï¼Œä¸ä¼šäº§ç”Ÿé˜»å¡&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢è¯•å®˜&lt;/strong&gt;ï¼šèƒ½è§£é‡Šä¸€ä¸‹ I/O å¤šè·¯å¤ç”¨æ¨¡å‹ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å€™é€‰äºº&lt;/strong&gt;ï¼šå—¯ï½ï½ï¼ŒI/O å¤šè·¯å¤ç”¨æ˜¯æŒ‡åˆ©ç”¨å•ä¸ªçº¿ç¨‹æ¥åŒæ—¶ç›‘å¬å¤šä¸ª Socket ï¼Œå¹¶åœ¨æŸä¸ª Socket å¯è¯»ã€å¯å†™æ—¶å¾—åˆ°é€šçŸ¥ï¼Œä»è€Œé¿å…æ— æ•ˆçš„ç­‰å¾…ï¼Œå……åˆ†åˆ©ç”¨ CPU èµ„æºã€‚ç›®å‰çš„ I/O å¤šè·¯å¤ç”¨éƒ½æ˜¯é‡‡ç”¨çš„ epoll æ¨¡å¼å®ç°ï¼Œå®ƒä¼šåœ¨é€šçŸ¥ç”¨æˆ·è¿›ç¨‹ Socket å°±ç»ªçš„åŒæ—¶ï¼ŒæŠŠå·²å°±ç»ªçš„ Socket å†™å…¥ç”¨æˆ·ç©ºé—´ï¼Œä¸éœ€è¦æŒ¨ä¸ªéå† Socket æ¥åˆ¤æ–­æ˜¯å¦å°±ç»ªï¼Œæå‡äº†æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ Redis çš„ç½‘ç»œæ¨¡å‹å°±æ˜¯ä½¿ç”¨ I/O å¤šè·¯å¤ç”¨ç»“åˆäº‹ä»¶çš„å¤„ç†å™¨æ¥åº”å¯¹å¤šä¸ª Socket è¯·æ±‚ï¼Œæ¯”å¦‚ï¼Œæä¾›äº†è¿æ¥åº”ç­”å¤„ç†å™¨ã€å‘½ä»¤å›å¤å¤„ç†å™¨ï¼Œå‘½ä»¤è¯·æ±‚å¤„ç†å™¨ï¼›&lt;/p&gt;
&lt;p&gt;åœ¨ Redis6.0 ä¹‹åï¼Œä¸ºäº†æå‡æ›´å¥½çš„æ€§èƒ½ï¼Œåœ¨å‘½ä»¤å›å¤å¤„ç†å™¨ä½¿ç”¨äº†å¤šçº¿ç¨‹æ¥å¤„ç†å›å¤äº‹ä»¶ï¼Œåœ¨å‘½ä»¤è¯·æ±‚å¤„ç†å™¨ä¸­ï¼Œå°†å‘½ä»¤çš„è½¬æ¢ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œå¢åŠ å‘½ä»¤è½¬æ¢é€Ÿåº¦ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œä¾ç„¶æ˜¯å•çº¿ç¨‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æœ¬æ–‡å¼•è‡ªé»‘é©¬ç¨‹åºå‘˜ Java é¢è¯•å®å…¸&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="é¢ç»" scheme="http://127.0.0.1/categories/interview/" />
        <category term="Redis" scheme="http://127.0.0.1/tags/Redis/" />
        <updated>2023-08-05T16:00:00.000Z</updated>
    </entry>
</feed>
