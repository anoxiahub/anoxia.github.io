<!-- build time: Tue Aug 15 2023 11:48:13 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="http://zero-yuan.gitee.io/rss.xml"><link rel="alternate" type="application/atom+xml" href="http://zero-yuan.gitee.io/atom.xml"><link rel="alternate" type="application/json" href="http://zero-yuan.gitee.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="计算机基础"><link rel="canonical" href="http://zero-yuan.gitee.io/HTTP%E5%92%8CWebsocket%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/"><title>HTTP和Websocket的前世今生 | 智慧笔记 = = 欢迎来到智慧笔记~这里主要会记录编程学习笔记🌸</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">HTTP和Websocket的前世今生</h1><div class="meta"><span class="item" title="创建时间：2023-08-09 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-08-09T00:00:00+08:00">2023-08-09</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>3.6k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>3 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">智慧笔记</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/assets%5Cwebsocket.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://zero-yuan.gitee.io/HTTP%E5%92%8CWebsocket%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.webp"><meta itemprop="name" content="anoxia"><meta itemprop="description" content="欢迎来到智慧笔记~这里主要会记录编程学习笔记🌸, anoxia的后端博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><p><img data-src="https://raw.githubusercontent.com/lin0yuan/Image/master/f4e0159841ab450d861dde9e8fb5ba0d.gif" alt="csdn"></p><blockquote><p>📝个人博客：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl82MTk1NzI4OT90eXBlPWJsb2c=">零元</span></p></blockquote><h1 id="前言"><a class="anchor" href="#前言">#</a> 前言</h1><p>相信大家都对 HTTP 协议比较熟悉，因为它是我们接触最多的一个协议。但 Websocket 跟它又有什么关系，有什么作用呢？这篇文章我们通过 HTTP 来引出 Webscoket 这个协议。</p><h1 id="一-关于http"><a class="anchor" href="#一-关于http">#</a> 一、关于 HTTP</h1><h2 id="1-http请求"><a class="anchor" href="#1-http请求">#</a> 1. HTTP 请求</h2><ul><li><strong>OSI 七层架构：</strong></li></ul><p><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/7e6e42704eff475e963c5c77cefe75d1.png" alt="此处有图片"><br>大家都知道，HTTP 协议是基于 TCP 协议开发的一款应用层协议，它主要针对的就是网站的一些请求</p><ul><li><p><strong>请求图：</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/60a5da665ddf48be90383fa1192fabe1.png" alt="此处有图片"><br>像这种可以算的上 HTTP 最简单的请求了，客户端向服务器请求数据，此时服务器响应数据，根据客户端请求的数据来返回对应的信息，可以进行一些基本的获取信息、请求数据一类的请求。</p><p>当然根据 REST 规范，还有 POST 请求、PUT 请求、HEAD 请求，这里就不一一列举了，大家有兴趣可以自己查一下。</p></li></ul><blockquote><p>因为 HTTP 这种协议只能客户端发送请求，服务器不能主动发送请求。大家看到这或许会有疑惑，为什么还要要求服务器主动推送呢。</p></blockquote><ul><li><p><strong>普通请求：</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/43956a553b454c838785fbfc24722037.png" alt="此处有图片">普通请求结合 Ajax 代码示例：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/to/hong"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>大家看这个图就知道了，此时小明想向小红炫耀一下自家的猫多么厉害 (或许这就是孩童的乐趣吧)，可是服务器并不能主动推送信息，小红永远也收不到，也就无法看到能后空翻的小猫了。</p></li></ul><blockquote><p>那么该如何解决这个问题呢？乐于助人的攻城狮想出了办法：可以让客户端频繁的去请求服务器不就行了，只要我请求的频率到一定程度，不就和服务器主动推送没区别了吗。</p></blockquote><h2 id="2-传统轮询"><a class="anchor" href="#2-传统轮询">#</a> 2. 传统轮询</h2><ul><li><p><strong>轮询方式:</strong></p><p><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/image-20230811104845648.png" alt="image-20230811104845648"></p><p>传统轮询请求结合 Ajax 代码示例：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/path/to/server"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>          <span class="token comment">// 发起下一次请求</span></pre></td></tr><tr><td data-num="6"></td><td><pre>          <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>因为 HTTP 请求是请求响应类型的，所以每次 HTTP 请求之后都会返回数据，即使没有信息，也会返回一个空值。这样对于聊天的话就会做很多无用的请求，让服务器遭受 “凌迟之痛”，并且消耗大量带宽。</p></li></ul><blockquote><p>小明也很苦恼，明明就发一个消息，为什么消耗这么多流量呢？刚充的花费就没了。乐于助人的攻城狮肯定不会眼睁睁的看着小明因为约会把自己的金钱全部掏空，于是就做了一个违背祖宗的决定。</p></blockquote><h2 id="3-长轮询"><a class="anchor" href="#3-长轮询">#</a> 3. 长轮询</h2><blockquote><p>在上面的传统轮询中，巨量的请求都涌向服务器，占据大量网络资源。那么如何才能改进，避免大量资源的占用呢？</p></blockquote><p>长轮询意味着浏览器只需启动一个 HTTP 请求，其连接的服务器会 “hold” 住此次连接，直到有新消息才返回响应信息并关闭连接，客户端处理完响应信息后再向服务器发送新的 HTTP 请求，以此类推。</p><ul><li><p><strong>轮询示例：</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/635cd2a0ea404a0695cf91ce5fc85e2c.png" alt="此处有图片">跟上面的短轮询对比，从图片上就感觉到不是那么密密麻麻的了。网络也是如此，减少了大量不必要的请求。</p><p><strong>轮询可能在以下 3 种情况时终止：</strong></p><ul><li>有新数据推送 。当服务器向浏览器推送信息后，应该主动结束程序运行从而让连接断开，这样浏览器才能及时收到数据。</li><li>没有新数据推送 。应该设定一个最长时限，避免 WEB 服务器超时（Timeout），若一直没有新信息，服务器应主动向浏览器发送本次轮询无新信息的正常响应，并断开连接，这也被称为 “心跳” 信息。</li><li>网络故障或异常 。由于网络故障等因素造成的请求超时或出错也可能导致轮询的意外中断，此时浏览器将收到错误信息。</li></ul></li></ul><blockquote><p>这时候小明才长长叹拉口气，终于不会把自己的小金库花光了，还准备跟小红约会的时候用呢。</p></blockquote><ul><li><strong>注意：长轮询和长连接是有区别的。长连接是基于 TCP 的，在协议上的修改，而长轮询是编程挂起手动修改的</strong></li></ul><h1 id="二-关于websocket"><a class="anchor" href="#二-关于websocket">#</a> 二、关于 WebSocket</h1><p>在上面你会发现，就算是 HTTP 的长轮询也是基于请求 - 应答的这种半双工通信模式，虽然可以双向的收发数据，但一个时刻只能一个方向有动作，传输效率低。最终要的一点就是，它是一种被动的通信模式，服务器只能被动的响应客户端请求，无法主动发送数据。</p><blockquote><p>做人不能总是主动，你越主动就越廉价。当然攻城狮也明白这个道理，为了让小明的爱情更加美好，就开始想办法做一个全双工的通信模型，不用像 HTTP 一样回合制类型那么客套了。于是，服务器就可以变得更加主动，一旦服务器有新的数据，就可以推送给小明，不需要再轮询了，通讯效率也变高了。</p></blockquote><h2 id="1websocket基础"><a class="anchor" href="#1websocket基础">#</a> 1.WebSocket 基础</h2><p>WebSocket 采用了二进制帧结构，语法、语义跟 HTTP 完全不兼容，但现在的龙头老大还是 HTTP，于是就尽量的往 HTTP 靠拢。</p><p>服务发现方面，WebSocket 没有使用 TCP 的”IP 地址 + 端口号 &quot;，而是沿用了 HTTP 的 URL 格式，但开头协议名不是 http，而是 ws 和 wss，默认端口也选择了 80 和 443。</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">ws</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>server</pre></td></tr></table></figure><p>这便是 websocket 的请求路径，唯一不同的就是协议名</p><h2 id="2-websocket请求流程"><a class="anchor" href="#2-websocket请求流程">#</a> 2. WebSocket 请求流程</h2><blockquote><p>作为一个新星协议，它是如何建立连接的呢</p></blockquote><ul><li><strong>建立连接：</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/20210306165527435.png" alt="">从上面这个图可以看出来，Websocket 竟然和 HTTP 有关系，最上面的是 HTTP1.1 版本，使用的 GET 请求，其中请求头一个字段很重要 Upgrade，看这个意思大家应该都知道，是升级的意思。这个请求就是使用 HTTP 请求向服务器传达一个信息，我要开始转换为 WebSocket 协议。</li></ul><p>如果用啦 HTTP 请求那肯定会有一个响应，因为 HTTP 就是请求应答模型的，当然这次也肯定不例外。</p><ul><li><strong>连接响应：</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/20210306170713531.png" alt=""><br>上面这个就是服务端产生的应答，告诉客户端，已经转换成功，以后我们就可以用 Websocket 交流信息了 (HTTP：就没人管我的死活吗？T﹏T)</li></ul><p><strong>那么 websocket 是如何工作的呢？</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/5caa193a74d44eefa72cac2c9a930a79.png" alt="此处有图片"><br>首先就是上面提到的建立连接，建立连接成功之后，就开始进行全双工通信，这时服务端和客户端就可以自由发送请求了。</p><p><strong>websocket 聊天示例:</strong><br><img data-src="https://anoxia-picgo.oss-cn-beijing.aliyuncs.com/758c808bfab64e8390fc882e4494c92d.png" alt="此处有图片"></p><blockquote><p>小明：程序猿太厉害了吧，我以后也要成为一名程序猿</p></blockquote><h2 id="3-websocket总结"><a class="anchor" href="#3-websocket总结">#</a> 3. Websocket 总结</h2><p>WebSocket 是一种基于 TCP 协议的通信协议，它提供了全双工的实时通信能力，使服务器和客户端之间可以进行双向的、实时的数据传输。</p><p><strong>以下是 WebSocket 的一些重要特点和用法：</strong></p><ul><li><p>双向通信：WebSocket 允许服务器和客户端之间进行双向通信，无需依赖于客户端发起请求。服务器可以主动向客户端推送消息或数据，而不需要等待客户端发送请求。</p></li><li><p>实时性：WebSocket 提供了低延迟的实时通信能力，适用于需要及时推送数据的场景，如即时聊天、实时消息更新等。</p></li><li><p>长连接：与传统的 HTTP 请求 - 响应模式不同，WebSocket 在握手阶段建立连接后，连接会保持打开，双方可以长时间保持通信状态，避免了频繁建立和关闭连接的开销。</p></li><li><p>二进制支持：WebSocket 不仅可以传输文本数据，还支持传输二进制数据，这使得它能够处理多媒体数据、文件传输等更复杂的场景。</p></li><li><p>适用于 Web 应用和移动应用：WebSocket 可以被广泛应用于 Web 应用和移动应用中，为实时通信提供了强大的支持。</p></li></ul><p>在使用 WebSocket 进行通信时，开发者可以借助相应的 WebSocket 客户端库或者浏览器提供的 WebSocket API 来实现与服务器的连接和数据传输。同时，服务器端也需要支持 WebSocket 协议来处理客户端的连接和消息。</p><h1 id="三-总结"><a class="anchor" href="#三-总结">#</a> 三、总结</h1><p><strong>关于 HTTP 请求和 WebSocket 的对比：</strong></p><ul><li><p>连接方式：HTTP 是一种无状态的请求 - 响应协议，每次请求都需要重新建立连接。而 WebSocket 则是一种全双工通信协议，通过一次握手后，客户端和服务器之间可以保持长时间的连接，实现双向通信。</p></li><li><p>通信效率：由于 HTTP 协议的特性，每次请求 - 响应的过程会带来较大的开销。而 WebSocket 的长连接可以减少频繁的握手和头部信息传输，从而提高通信效率，特别适合实时性要求高的场景。</p></li><li><p>数据格式：HTTP 使用文本形式的请求和响应，通常以 JSON 或 XML 格式进行数据传输。而 WebSocket 可以传输二进制数据，可以更高效地处理多媒体数据或其他复杂的格式。</p></li><li><p>支持性：WebSocket 是一种相对较新的协议，不是所有的浏览器和服务器都完全支持它。而 HTTP 是通用的协议，几乎所有的浏览器和服务器都能良好支持。</p></li></ul><p>综上所述，WebSocket 相对于 HTTP 具有更低的通信延迟、更高的效率和更强大的功能，特别适用于实时通信、推送和实时更新的场景。但在一些简单的请求 - 响应交互中，仍然可以使用 HTTP。选择使用哪种协议取决于具体的需求和场景。</p><hr><p><strong>小明后续：</strong><br>差点跑题了，咱们损耗好几个攻城狮为的就是小明，主要还是要关注小明和小红的进度。</p><p>第二天：</p><p>不争气的小明因为真的陪小红看了一晚上小猫后空翻把小红给气走了。</p><div class="tags"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag"><i class="ic i-tag"></i> 计算机基础</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-08-11 10:54:17" itemprop="dateModified" datetime="2023-08-11T10:54:17+08:00">2023-08-11</time> </span><span id="HTTP和Websocket的前世今生/" class="item leancloud_visitors" data-flag-title="HTTP和Websocket的前世今生" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/weipay.png" alt="anoxia 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="anoxia 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>anoxia <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>本文链接：</strong> <a href="http://zero-yuan.gitee.io/HTTP%E5%92%8CWebsocket%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/" title="HTTP和Websocket的前世今生">http://zero-yuan.gitee.io/HTTP和Websocket的前世今生/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/redis/%E8%AF%BB%E5%86%99%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s1.ax1x.com&#x2F;2023&#x2F;08&#x2F;08&#x2F;pPVInQH.jpg" title="关于缓存读写一致问题"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Redis</span><h3>关于缓存读写一致问题</h3></a></div><div class="item right"><a href="/interview/Spring%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;anoxia-picgo.oss-cn-beijing.aliyuncs.com&#x2F;image-20230811104601500.png" title="Spring相关面试题"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 面经</span><h3>Spring相关面试题</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-%E5%85%B3%E4%BA%8Ehttp"><span class="toc-number">2.</span> <span class="toc-text">一、关于 HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-http%E8%AF%B7%E6%B1%82"><span class="toc-number">2.1.</span> <span class="toc-text">1. HTTP 请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BC%A0%E7%BB%9F%E8%BD%AE%E8%AF%A2"><span class="toc-number">2.2.</span> <span class="toc-text">2. 传统轮询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%95%BF%E8%BD%AE%E8%AF%A2"><span class="toc-number">2.3.</span> <span class="toc-text">3. 长轮询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E5%85%B3%E4%BA%8Ewebsocket"><span class="toc-number">3.</span> <span class="toc-text">二、关于 WebSocket</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1websocket%E5%9F%BA%E7%A1%80"><span class="toc-number">3.1.</span> <span class="toc-text">1.WebSocket 基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-websocket%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B"><span class="toc-number">3.2.</span> <span class="toc-text">2. WebSocket 请求流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-websocket%E6%80%BB%E7%BB%93"><span class="toc-number">3.3.</span> <span class="toc-text">3. Websocket 总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">三、总结</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="anoxia" data-src="/images/avatar.webp"><p class="name" itemprop="name">anoxia</p><div class="description" itemprop="description">anoxia的后端博客</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">10</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">3</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">7</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpbjB5dWFu" title="https:&#x2F;&#x2F;github.com&#x2F;lin0yuan"><i class="ic i-github"></i></span> <a href="/3102691553@qq.com" title="3102691553@qq.com" class="item email"><i class="ic i-envelope"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/redis/%E8%AF%BB%E5%86%99%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/interview/Spring%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面经">面经</a></div><span><a href="/interview/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" title="微服务相关面试题">微服务相关面试题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面经">面经</a></div><span><a href="/interview/MySQL%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" title="Mysql相关面试题">Mysql相关面试题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面经">面经</a></div><span><a href="/interview/Redis%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" title="Redis相关面试题">Redis相关面试题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/redis/" title="分类于 Redis">Redis</a></div><span><a href="/redis/%E8%AF%BB%E5%86%99%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/" title="关于缓存读写一致问题">关于缓存读写一致问题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面经">面经</a></div><span><a href="/interview/Java%E9%9B%86%E5%90%88%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Java集合相关面试题">Java集合相关面试题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面经">面经</a></div><span><a href="/interview/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" title="消息中间件相关面试题">消息中间件相关面试题</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/HTTP%E5%92%8CWebsocket%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/" title="HTTP和Websocket的前世今生">HTTP和Websocket的前世今生</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/interview/" title="分类于 面经">面经</a></div><span><a href="/interview/Spring%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94/" title="Spring相关面试题">Spring相关面试题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/project/" title="分类于 项目总结">项目总结</a></div><span><a href="/project/Mysql%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/" title="连接数据库遇到问题">连接数据库遇到问题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/project/" title="分类于 项目总结">项目总结</a></div><span><a href="/project/bug%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3/" title="项目常见问题">项目常见问题</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">anoxia @ 智慧笔记</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">51k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">46 分钟</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"HTTP和Websocket的前世今生/",favicon:{show:"智慧笔记",hide:"别走嘛QwQ"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//fastly.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hexo-renderer-multi-next-markdown-it -->